2025-06-16 10:44:13 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 63647 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:44:13 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 10:44:13 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 10:44:14 [main] WARN  org.hibernate.dialect.Dialect - HHH000511: The 2.2.0 version for [org.hibernate.dialect.PostgreSQLDialect] is no longer supported, hence certain features may not work properly. The minimum supported version is 12.0.0. Check the community dialects project for available legacy versions.
2025-06-16 10:44:14 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table audit_logs (
        created_at timestamp(6) not null,
        end_time timestamp(6) not null,
        start_time timestamp(6) not null,
        updated_at timestamp(6),
        version bigint,
        user_type varchar(10) not null,
        entity_id uuid,
        id uuid not null,
        user_id uuid,
        status varchar(20) not null,
        ip_address varchar(45),
        action_type varchar(100) not null,
        entity_type varchar(100) not null,
        method_name varchar(100),
        created_by varchar(255),
        error_message varchar(255),
        new_values jsonb,
        old_values jsonb,
        parameters varchar(255),
        session_id varchar(255),
        updated_by varchar(255),
        user_agent varchar(255),
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table audit_logs (
        created_at timestamp(6) not null,
        end_time timestamp(6) not null,
        start_time timestamp(6) not null,
        updated_at timestamp(6),
        version bigint,
        user_type varchar(10) not null,
        entity_id uuid,
        id uuid not null,
        user_id uuid,
        status varchar(20) not null,
        ip_address varchar(45),
        action_type varchar(100) not null,
        entity_type varchar(100) not null,
        method_name varchar(100),
        created_by varchar(255),
        error_message varchar(255),
        new_values jsonb,
        old_values jsonb,
        parameters varchar(255),
        session_id varchar(255),
        updated_by varchar(255),
        user_agent varchar(255),
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table audit_logs (
        created_at timestamp(6) not null,
        end_time timestamp(6) not null,
        start_time timestamp(6) not null,
        updated_at timestamp(6),
        version bigint,
        user_type varchar(10) not null,
        entity_id uuid,
        id uuid not null,
        user_id uuid,
        status varchar(20) not null,
        ip_address varchar(45),
        action_type varchar(100) not null,
        entity_type varchar(100) not null,
        method_name varchar(100),
        created_by varchar(255),
        error_message varchar(255),
        new_values jsonb,
        old_values jsonb,
        parameters varchar(255),
        session_id varchar(255),
        updated_by varchar(255),
        user_agent varchar(255),
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigserial not null,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigserial not null,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigserial not null,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create index idx_audit_user_id 
       on audit_logs (user_id)" via JDBC [Table "AUDIT_LOGS" not found;]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create index idx_audit_user_id 
       on audit_logs (user_id)" via JDBC [Table "AUDIT_LOGS" not found;]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTableConstraints(SchemaCreatorImpl.java:383) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:351) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "AUDIT_LOGS" not found; SQL statement:

    create index idx_audit_user_id 
       on audit_logs (use [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateIndex.update(CreateIndex.java:70) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create index idx_audit_action_type 
       on audit_logs (action_type)" via JDBC [Table "AUDIT_LOGS" not found;]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create index idx_audit_action_type 
       on audit_logs (action_type)" via JDBC [Table "AUDIT_LOGS" not found;]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTableConstraints(SchemaCreatorImpl.java:383) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:351) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "AUDIT_LOGS" not found; SQL statement:

    create index idx_audit_action_type 
       on audit_logs (action_ [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateIndex.update(CreateIndex.java:70) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create index idx_audit_entity_type 
       on audit_logs (entity_type)" via JDBC [Table "AUDIT_LOGS" not found;]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create index idx_audit_entity_type 
       on audit_logs (entity_type)" via JDBC [Table "AUDIT_LOGS" not found;]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTableConstraints(SchemaCreatorImpl.java:383) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:351) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "AUDIT_LOGS" not found; SQL statement:

    create index idx_audit_entity_type 
       on audit_logs (entity_ [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateIndex.update(CreateIndex.java:70) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:14 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create index idx_audit_created_at 
       on audit_logs (created_at)" via JDBC [Table "AUDIT_LOGS" not found;]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create index idx_audit_created_at 
       on audit_logs (created_at)" via JDBC [Table "AUDIT_LOGS" not found;]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTableConstraints(SchemaCreatorImpl.java:383) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:351) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "AUDIT_LOGS" not found; SQL statement:

    create index idx_audit_created_at 
       on audit_logs (create [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateIndex.update(CreateIndex.java:70) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 118 common frames omitted
2025-06-16 10:44:17 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 3.502 seconds (process running for 8.464)
2025-06-16 10:44:17 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:44:17 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 10:44:17 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 63647 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:44:17 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 10:44:17 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 10:44:18 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 10:44:18 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 99776a1a-8b8c-48af-bb15-82cc8c622d2d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 10:44:18 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1f0b614f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@788764e8, org.springframework.security.web.context.SecurityContextHolderFilter@55dfe75e, org.springframework.security.web.header.HeaderWriterFilter@7d27668, org.springframework.web.filter.CorsFilter@5027bed9, org.springframework.security.web.csrf.CsrfFilter@46aa8d9c, org.springframework.security.web.authentication.logout.LogoutFilter@3d7e143e, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3ecb9818, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6810853b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@4eee6650, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5246b5ab, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@b135265, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@123f52e8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@aab77db, org.springframework.security.web.access.ExceptionTranslationFilter@66099385, org.springframework.security.web.access.intercept.AuthorizationFilter@3a522e74]
2025-06-16 10:44:18 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 10:44:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:44:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.616 seconds (process running for 9.735)
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@41e7b597]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1ca66402]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@58f11706]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1607a212]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4af72213]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 10:44:18 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@604cefd2]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@27329437]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3b1ca962]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3d5c9c06]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2d521a9f]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:44:18 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3bb4fdfd]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@10540366]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@67128fd6]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 10:44:18 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1eef1292]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2f143881]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@3c8b4db4 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 10:44:18 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@50408161]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:44:18 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2051d332]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@6604c533, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@6604c533, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@6604c533, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@6604c533, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@2040c617
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@72d0bbc7
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5187fe04]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 10:44:18 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:44:18 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:44:18 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:44:18 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:44:18 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:44:18 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:44:18 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:44:18 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:44:18 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists admin_user_allowed_ips 
       drop constraint if exists FK6djpms049826iouqv8t4aun7w
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists admin_user_roles 
       drop constraint if exists FK486l3h5kt03mw088cosejeud1
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       drop constraint if exists FKlnwjsut7480baufv45j0i4bf3
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       drop constraint if exists FKmuei4qx2vt6qemjkrjqkd0r3b
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       drop constraint if exists FK1qd9d9utbnnhhqff0e01nmgwl
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists client_documents 
       drop constraint if exists FK8w1vi21ia7d69btkpligpf3hw
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists client_login_history 
       drop constraint if exists FKj2f6d8l3leqrkylvad72hgpva
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists client_sessions 
       drop constraint if exists FKaivi0y78o2djgkrl9lg4f9xbs
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists enquiries 
       drop constraint if exists FK9r33qikmwbv07bnak6dmstqfv
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists entities 
       drop constraint if exists FKofse0g9fghwfrt42ko68175y1
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists investments 
       drop constraint if exists FKrst49wjxgj0suyv8ceesdv7w1
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    alter table if exists investments 
       drop constraint if exists FKragfnufauta9wlljt2qpue0hq
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists admin_user_allowed_ips cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists admin_user_roles cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists admin_users cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists audit_logs cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists certificate_templates cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists certificates cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists client_documents cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists client_login_history cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists client_membership cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists client_notification_preferences cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists client_notifications cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists client_sessions cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists clients cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists enquiries cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists entities cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists investments cascade
2025-06-16 10:44:18 [SpringApplicationShutdownHook] DEBUG org.hibernate.SQL - 
    drop table if exists users cascade
2025-06-16 10:47:25 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 64097 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:47:25 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:47:28 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:47:29 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 120 common frames omitted
2025-06-16 10:47:29 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 120 common frames omitted
2025-06-16 10:47:29 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:47:29 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 100 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98)
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82)
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 110 common frames omitted
2025-06-16 10:47:29 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@229cf4e7]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3c81f484 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1cb38eb6, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 100 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98)
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82)
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 110 common frames omitted
2025-06-16 10:47:29 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:47:29 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:47:29 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 64097 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:47:29 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:47:29 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:47:30 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 119 common frames omitted
2025-06-16 10:47:30 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 119 common frames omitted
2025-06-16 10:47:30 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:47:30 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.4.jar:6.1.4]
	... 99 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 109 common frames omitted
2025-06-16 10:47:30 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@39fcefea]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@80b741 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@66a3ca04 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 73 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.4.jar:6.1.4]
	... 99 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 109 common frames omitted
2025-06-16 10:47:30 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@1bb386b3]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@80b741 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@66a3ca04 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:47:30 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@47354906]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@80b741 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@66a3ca04 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:50:27 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 64529 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:50:27 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:50:30 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 64551 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:50:30 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:50:32 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:50:33 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 120 common frames omitted
2025-06-16 10:50:33 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 120 common frames omitted
2025-06-16 10:50:33 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:50:33 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 100 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98)
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82)
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 110 common frames omitted
2025-06-16 10:50:33 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@62c6c467]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@7454f141 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1cb38eb6, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 100 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98)
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82)
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 110 common frames omitted
2025-06-16 10:50:33 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:50:33 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:50:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 64529 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:50:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:50:34 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:50:34 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:50:34 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 119 common frames omitted
2025-06-16 10:50:34 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 119 common frames omitted
2025-06-16 10:50:34 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:50:34 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.4.jar:6.1.4]
	... 99 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 109 common frames omitted
2025-06-16 10:50:34 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@5c09b49f]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@44173c2b testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@63828988 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 73 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.4.jar:6.1.4]
	... 99 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 109 common frames omitted
2025-06-16 10:50:34 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@189fc9c9]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@44173c2b testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@63828988 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:50:34 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@6e6285d3]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@44173c2b testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@63828988 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:50:35 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 120 common frames omitted
2025-06-16 10:50:35 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233)
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142)
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145)
	at java.base/java.util.HashMap.forEach(HashMap.java:1421)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866)
	at org.h2.command.Parser.readIfDataType(Parser.java:5704)
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686)
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565)
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999)
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939)
	at org.h2.command.Parser.parseCreate(Parser.java:6404)
	at org.h2.command.Parser.parsePrepared(Parser.java:666)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 120 common frames omitted
2025-06-16 10:50:35 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:50:35 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 100 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98)
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82)
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 110 common frames omitted
2025-06-16 10:50:35 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@7fece723]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@4ed2eee1 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1cb38eb6, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784)
	... 100 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468)
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98)
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82)
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 110 common frames omitted
2025-06-16 10:50:35 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:50:35 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:50:36 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 64551 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:50:36 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:50:36 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:50:36 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_membership (
        digital_card_issued boolean,
        joined_date date not null,
        points_balance integer,
        tier_upgrade_date date,
        client_id bigint not null,
        created_at timestamp(6),
        id bigint generated by default as identity,
        updated_at timestamp(6),
        membership_status varchar(20),
        membership_tier varchar(20),
        membership_number varchar(50) not null unique,
        benefits_unlocked jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 119 common frames omitted
2025-06-16 10:50:36 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    )" via JDBC [Unknown data type: "JSONB";]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlString(Helper.java:233) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.Helper.applySqlStrings(Helper.java:217) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createTables(SchemaCreatorImpl.java:420) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createSequencesTablesConstraints(SchemaCreatorImpl.java:340) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.createFromMetadata(SchemaCreatorImpl.java:239) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.performCreation(SchemaCreatorImpl.java:172) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.internal.SchemaCreatorImpl.doCreation(SchemaCreatorImpl.java:118) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:256) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:145) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at java.base/java.util.HashMap.forEach(HashMap.java:1421) ~[na:na]
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:142) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:315) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:450) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1507) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:388) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:364) ~[spring-orm-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLNonTransientException: Unknown data type: "JSONB"; SQL statement:

    create table client_notifications (
        is_read boolean,
        client_id bigint not null,
        created_at timestamp(6) not null,
        delivered_at timestamp(6),
        expires_at timestamp(6),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        updated_at timestamp(6),
        version bigint,
        id uuid not null,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        created_by varchar(255),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        message TEXT not null,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        title varchar(255) not null,
        updated_by varchar(255),
        metadata jsonb,
        primary key (id)
    ) [50004-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:566) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType1(Parser.java:5866) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.readIfDataType(Parser.java:5704) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnWithType(Parser.java:5686) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseColumnForTable(Parser.java:5565) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8999) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:564) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.0.1.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.0.1.jar:na]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	... 119 common frames omitted
2025-06-16 10:50:37 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:50:37 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.4.jar:6.1.4]
	... 99 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 109 common frames omitted
2025-06-16 10:50:37 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@6eded737]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@6e8ab407 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@30dd7cc5 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'auditServiceImpl': Unsatisfied dependency expressed through field 'auditLogRepository': Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:787) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:767) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1419) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 73 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:784) ~[spring-beans-6.1.4.jar:6.1.4]
	... 99 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 109 common frames omitted
2025-06-16 10:50:37 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@7756d3ad]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@6e8ab407 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@30dd7cc5 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:50:37 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@2dc0a0a7]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@6e8ab407 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@30dd7cc5 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@93081b6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@16c069df, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@295cf707, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@24c4ddae, org.springframework.boot.test.context.SpringBootTestAnnotation@996efd8e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:142) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:98) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:52:30 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 64916 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:52:30 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:52:31 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@2d2a8819 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
2025-06-16 10:52:31 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@2d2a8819 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 10:52:31 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@4544ab46]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@10e8c7a2 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@5d8fd077 key = [com.finance.admin.config.TestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@df79acd3, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@2d2a8819 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
2025-06-16 10:52:31 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:52:31 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:52:31 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 64916 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:52:31 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:52:33 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #8 of class path resource [test-data.sql]: INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
2025-06-16 10:52:33 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #8 of class path resource [test-data.sql]: INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #8 of class path resource [test-data.sql]: INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 98 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.CERTIFICATE_TEMPLATES(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', NULL, TRUE, TRUE, 1, NULL, 'PDF', NULL, NULL, '#2196F3', '#4CAF50', TIMESTAMP '2025-06-16 10:52:33.918765', TIMESTAMP '2025-06-16 10:52:33.918765', '00000000-0000-0000-0000-000000000001')"; SQL statement:
INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:120) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.dml.Insert.insertRows(Insert.java:174) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.dml.Insert.update(Insert.java:135) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 108 common frames omitted
2025-06-16 10:52:33 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@76e51181]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@4fc50fee testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@2e949007 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@3a645551, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #8 of class path resource [test-data.sql]: INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 74 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #8 of class path resource [test-data.sql]: INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyDataScripts(AbstractScriptDatabaseInitializer.java:102) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:77) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 98 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLIntegrityConstraintViolationException: Unique index or primary key violation: "PRIMARY KEY ON PUBLIC.CERTIFICATE_TEMPLATES(ID) ( /* key:1 */ CAST(1 AS BIGINT), 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', NULL, TRUE, TRUE, 1, NULL, 'PDF', NULL, NULL, '#2196F3', '#4CAF50', TIMESTAMP '2025-06-16 10:52:33.918765', TIMESTAMP '2025-06-16 10:52:33.918765', '00000000-0000-0000-0000-000000000001')"; SQL statement:
INSERT INTO certificate_templates (id, template_name, template_type, template_content, is_active, is_default, version, created_by, created_at, updated_at) VALUES (1, 'Default Share Certificate', 'SHARE_CERTIFICATE', 'Default template for share certificates with company branding', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (2, 'Investment Certificate Template', 'INVESTMENT_CERTIFICATE', 'Standard investment certificate template', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP), (3, 'Bond Certificate Template', 'BOND_CERTIFICATE', 'Template for bond certificates', TRUE, TRUE, 1, '00000000-0000-0000-0000-000000000001', CURRENT_TIMESTAMP, CURRENT_TIMESTAMP) [23505-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:520) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.mvstore.db.MVPrimaryIndex.add(MVPrimaryIndex.java:120) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.mvstore.db.MVTable.addRow(MVTable.java:519) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.dml.Insert.insertRows(Insert.java:174) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.dml.Insert.update(Insert.java:135) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.dml.DataChangeStatement.update(DataChangeStatement.java:74) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 108 common frames omitted
2025-06-16 10:52:33 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@1babd50e]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@4fc50fee testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@2e949007 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@3a645551, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:52:34 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@136dc575]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@4fc50fee testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@2e949007 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@3a645551, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:54:46 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 65292 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:54:46 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:54:47 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@2ac9e53c name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
2025-06-16 10:54:47 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@2ac9e53c name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 10:54:47 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@5de335cf]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@74a74070 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@6c6919ff key = [com.finance.admin.config.TestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@df79acd3, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@2ac9e53c name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
2025-06-16 10:54:47 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:54:47 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:54:47 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 65292 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:54:47 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:54:49 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [com/finance/admin/config/TestConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
2025-06-16 10:54:49 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [com/finance/admin/config/TestConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:542) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [com/finance/admin/config/TestConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 101 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647) ~[spring-beans-6.1.4.jar:6.1.4]
	... 115 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.initDatabase(EmbeddedDatabaseFactory.java:200) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.getDatabase(EmbeddedDatabaseFactory.java:158) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder.build(EmbeddedDatabaseBuilder.java:283) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at com.finance.admin.config.TestConfig.dataSource(TestConfig.java:51) ~[test-classes/:na]
	at com.finance.admin.config.TestConfig$$SpringCGLIB$$0.CGLIB$dataSource$2(<generated>) ~[test-classes/:na]
	at com.finance.admin.config.TestConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>) ~[test-classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-6.1.4.jar:6.1.4]
	at com.finance.admin.config.TestConfig$$SpringCGLIB$$0.dataSource(<generated>) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140) ~[spring-beans-6.1.4.jar:6.1.4]
	... 116 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE [*]KEY unique_user_role (admin_user_id, role) )"; expected "NULLS, ("; SQL statement:
CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) ) [42001-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getSyntaxError(DbException.java:261) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:750) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ParserBase.read(ParserBase.java:357) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableConstraintIf(Parser.java:8753) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8989) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:569) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 132 common frames omitted
2025-06-16 10:54:49 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@43edd4e0]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@5f3705e7 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@8872669 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@3a645551, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [com/finance/admin/config/TestConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:542) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 74 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [com/finance/admin/config/TestConfig.class]: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:651) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:485) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1335) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1165) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1443) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:907) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:785) ~[spring-beans-6.1.4.jar:6.1.4]
	... 101 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.sql.DataSource]: Factory method 'dataSource' threw exception with message: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:647) ~[spring-beans-6.1.4.jar:6.1.4]
	... 115 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #14 of class path resource [test-schema.sql]: CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.initDatabase(EmbeddedDatabaseFactory.java:200) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseFactory.getDatabase(EmbeddedDatabaseFactory.java:158) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.embedded.EmbeddedDatabaseBuilder.build(EmbeddedDatabaseBuilder.java:283) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at com.finance.admin.config.TestConfig.dataSource(TestConfig.java:51) ~[test-classes/:na]
	at com.finance.admin.config.TestConfig$$SpringCGLIB$$0.CGLIB$dataSource$2(<generated>) ~[test-classes/:na]
	at com.finance.admin.config.TestConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>) ~[test-classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[spring-context-6.1.4.jar:6.1.4]
	at com.finance.admin.config.TestConfig$$SpringCGLIB$$0.dataSource(<generated>) ~[test-classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140) ~[spring-beans-6.1.4.jar:6.1.4]
	... 116 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Syntax error in SQL statement "CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE [*]KEY unique_user_role (admin_user_id, role) )"; expected "NULLS, ("; SQL statement:
CREATE TABLE admin_user_roles ( id BIGINT AUTO_INCREMENT PRIMARY KEY, admin_user_id VARCHAR(36) NOT NULL, role VARCHAR(50) NOT NULL, FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE, UNIQUE KEY unique_user_role (admin_user_id, role) ) [42001-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getSyntaxError(DbException.java:261) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ParserBase.getSyntaxError(ParserBase.java:750) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ParserBase.read(ParserBase.java:357) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableConstraintIf(Parser.java:8753) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseTableColumnDefinition(Parser.java:8989) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreateTable(Parser.java:8939) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parseCreate(Parser.java:6404) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parsePrepared(Parser.java:666) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:592) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.parse(Parser.java:569) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Parser.prepareCommand(Parser.java:483) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:245) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 132 common frames omitted
2025-06-16 10:54:49 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@14f1db20]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5f3705e7 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@8872669 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@3a645551, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:54:49 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@56034552]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@5f3705e7 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@8872669 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@3fa247d1, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@64e7619d, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@3a645551, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@266374ef, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1e81f160, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:22 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 66708 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:22 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:57:24 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@6528d339 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
2025-06-16 10:57:24 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@6528d339 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 10:57:24 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@2066e897]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@12bcf7c6 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@5e763c07 key = [com.finance.admin.config.TestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1b33325c, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@6528d339 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
2025-06-16 10:57:24 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:24 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:57:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 66708 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:57:26 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:57:29 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:57:29 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:969) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
2025-06-16 10:57:29 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@4198abba]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@c05aae9 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@7ddbaac6 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1d365854, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:969) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 74 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
2025-06-16 10:57:29 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@5d1bde7]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@c05aae9 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@7ddbaac6 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1d365854, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:29 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@486ee996]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@c05aae9 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@7ddbaac6 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1d365854, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:29 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 10:57:29 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 10:57:29 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:29 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:30 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 10:57:30 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 10:57:30 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:30 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 10:57:30 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 66708 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:30 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 10:57:30 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 10:57:30 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:57:31 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 1.526 seconds (process running for 9.822)
2025-06-16 10:57:32 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:32 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 10:57:32 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 66708 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:32 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 10:57:32 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 10:57:32 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 10:57:33 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 308982c6-9228-402a-a2e1-de7f3c815d40

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 10:57:33 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@23d78235, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@360063c0, org.springframework.security.web.context.SecurityContextHolderFilter@1e2d5e92, org.springframework.security.web.header.HeaderWriterFilter@6974d582, org.springframework.web.filter.CorsFilter@4b5e6375, org.springframework.security.web.csrf.CsrfFilter@1bbfebd0, org.springframework.security.web.authentication.logout.LogoutFilter@6d506661, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2f2fbf18, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@583453e9, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@971d435, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4efb7738, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@402e7c0b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@d6e2a8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16a82904, org.springframework.security.web.access.ExceptionTranslationFilter@7135bf1b, org.springframework.security.web.access.intercept.AuthorizationFilter@22cc246d]
2025-06-16 10:57:33 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 10:57:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.572 seconds (process running for 11.036)
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3d38a4f7]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4e1a4c11]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6ef3215f]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@32711eee]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6b2ee147]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 10:57:33 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6a6e88e6]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5fab3e4f]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@38cd58d6]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7a762990]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2b6e835]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:57:33 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4a28867f]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@f733d39]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@58b0f38]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 10:57:33 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@22a78b84]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2e673ec8]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@3988edec and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 10:57:33 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6ff93321]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:33 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5bd1678b]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3d7f1e, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3d7f1e, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3d7f1e, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@3d7f1e, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@5d673aa
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@5c82e0d2
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@42644cb2]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 10:57:33 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:33 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:57:33 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:33 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:33 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:33 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:33 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:33 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:33 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:35 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 66794 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:35 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:57:36 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@7dd7ec56 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
2025-06-16 10:57:37 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@7dd7ec56 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 10:57:37 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@5e763c07]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3a116ca6 testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@12bcf7c6 key = [com.finance.admin.config.TestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1b33325c, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@7dd7ec56 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
2025-06-16 10:57:37 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:57:37 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 66794 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:37 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:57:39 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:57:41 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:57:41 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:969) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
2025-06-16 10:57:41 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@7707aa0e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@3954f6fd testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@6c066aaf key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1d365854, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:969) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 74 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
2025-06-16 10:57:41 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@29cc44d0]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3954f6fd testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@6c066aaf key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1d365854, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:41 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@334b4b6f]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@3954f6fd testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@6c066aaf key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@29526c05, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@58be6e8, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@1d365854, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@65a15628, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@41709512, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:41 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 10:57:41 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 10:57:41 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] ]
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 10:57:42 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 10:57:42 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:42 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 10:57:42 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 66794 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:42 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 10:57:42 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 10:57:42 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:57:43 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.977 seconds (process running for 8.399)
2025-06-16 10:57:44 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:44 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 66794 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:44 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 10:57:44 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 10:57:44 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 74c26954-bfb3-400c-8b3a-a9a1474768bf

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 10:57:44 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@c94bc68, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3cb83a55, org.springframework.security.web.context.SecurityContextHolderFilter@39caf0ea, org.springframework.security.web.header.HeaderWriterFilter@7b93cb87, org.springframework.web.filter.CorsFilter@4641b85e, org.springframework.security.web.csrf.CsrfFilter@79a871f3, org.springframework.security.web.authentication.logout.LogoutFilter@11a1c352, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@ea1670e, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@52875726, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@660c9e9b, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4437d69a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6e553c9b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@50dd4163, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4f5219ce, org.springframework.security.web.access.ExceptionTranslationFilter@623108f4, org.springframework.security.web.access.intercept.AuthorizationFilter@30eda2ec]
2025-06-16 10:57:44 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 10:57:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.47 seconds (process running for 9.607)
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3969cd3f]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6573afba]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@17a0439a]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6d8a5170]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7ecfc97c]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 10:57:44 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6db7aa4f]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@303497db]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1320f5d0]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6c8879d5]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@132b7e23]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:57:44 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@232ec93c]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5020880a]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5661ab1e]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 10:57:44 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2fc877f7]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6cefcee3]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@68e80a4b and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 10:57:44 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1deac7f4]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:44 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@52aaf59a]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@13ebf29e, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@13ebf29e, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@13ebf29e, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@13ebf29e, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@1d89183b
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@532d74e0
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6cfb7e]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 10:57:44 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:44 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:44 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:57:45 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:45 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:45 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:45 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:45 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:45 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:45 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:50 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 66874 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:50 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:57:51 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@72168258 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
2025-06-16 10:57:51 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@72168258 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 10:57:51 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@9763e61]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@20be793a testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@2a4cb8ae key = [com.finance.admin.config.TestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@77102b91, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3f9342d4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@9b9ecd73, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3fc9504b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@33308786, org.springframework.boot.test.context.SpringBootTestAnnotation@6784e3d6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: java.lang.IllegalStateException: Duplicate mock definition [MockDefinition@72168258 name = '', typeToMock = org.springframework.mail.javamail.JavaMailSender, extraInterfaces = set[[empty]], answer = RETURNS_DEFAULTS, serializable = false, reset = AFTER]
	at org.springframework.util.Assert.state(Assert.java:97)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.addDefinition(DefinitionsParser.java:107)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseMockBeanAnnotation(DefinitionsParser.java:88)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parseElement$1(DefinitionsParser.java:72)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:607)
	at org.springframework.core.annotation.TypeMappedAnnotations$AggregatesSpliterator.tryAdvance(TypeMappedAnnotations.java:574)
	at java.base/java.util.Spliterator.forEachRemaining(Spliterator.java:332)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parseElement(DefinitionsParser.java:72)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.lambda$parse$0(DefinitionsParser.java:65)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:728)
	at org.springframework.util.ReflectionUtils.doWithFields(ReflectionUtils.java:707)
	at org.springframework.boot.test.mock.mockito.DefinitionsParser.parse(DefinitionsParser.java:65)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:136)
	at org.springframework.boot.test.mock.mockito.MockitoPostProcessor.postProcessBeanFactory(MockitoPostProcessor.java:129)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:363)
	at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:197)
	at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:788)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:606)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
2025-06-16 10:57:51 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:51 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 10:57:51 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 66874 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:51 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 10:57:53 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:57:56 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
2025-06-16 10:57:56 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:969) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
2025-06-16 10:57:56 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@255e9ed4]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@1bbc1e3f testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@7462c4c9 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@77102b91, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3f9342d4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@c7b011f1, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3fc9504b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@33308786, org.springframework.boot.test.context.SpringBootTestAnnotation@6784e3d6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'auditLogRepository' defined in com.finance.admin.audit.repository.AuditLogRepository defined in @EnableJpaRepositories declared on ApplicationConfig: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:969) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:959) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 74 common frames omitted
Caused by: java.lang.IllegalArgumentException: Not a managed type: class com.finance.admin.audit.entity.AuditLog
	at org.hibernate.metamodel.model.domain.internal.JpaMetamodelImpl.managedType(JpaMetamodelImpl.java:193) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:468) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.managedType(MappingMetamodelImpl.java:98) ~[hibernate-core-6.4.4.Final.jar:6.4.4.Final]
	at org.springframework.data.jpa.repository.support.JpaMetamodelEntityInformation.<init>(JpaMetamodelEntityInformation.java:82) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaEntityInformationSupport.getEntityInformation(JpaEntityInformationSupport.java:69) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getEntityInformation(JpaRepositoryFactory.java:246) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:211) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:194) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactory.getTargetRepository(JpaRepositoryFactory.java:1) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:317) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$5(RepositoryFactoryBeanSupport.java:279) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.util.Lazy.get(Lazy.java:113) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:285) ~[spring-data-commons-3.2.3.jar:3.2.3]
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132) ~[spring-data-jpa-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
2025-06-16 10:57:56 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@6219e872]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@1bbc1e3f testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@7462c4c9 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@77102b91, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3f9342d4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@c7b011f1, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3fc9504b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@33308786, org.springframework.boot.test.context.SpringBootTestAnnotation@6784e3d6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:56 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@c3bd1a4]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@1bbc1e3f testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@7462c4c9 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@77102b91, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@3f9342d4, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@c7b011f1, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3fc9504b, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@33308786, org.springframework.boot.test.context.SpringBootTestAnnotation@6784e3d6], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:56 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 10:57:56 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 10:57:56 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:57 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 10:57:57 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 10:57:57 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:57 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 10:57:57 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 66874 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:57 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 10:57:57 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 10:57:57 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 10:57:58 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 1.058 seconds (process running for 8.851)
2025-06-16 10:57:59 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 10:57:59 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 66874 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 10:57:59 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 10:57:59 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 552b1c52-b855-4d99-a51c-f7d3b7a68924

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 10:57:59 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@25d4f8e0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1afe33e6, org.springframework.security.web.context.SecurityContextHolderFilter@5a1f4727, org.springframework.security.web.header.HeaderWriterFilter@2997e362, org.springframework.web.filter.CorsFilter@38a3e108, org.springframework.security.web.csrf.CsrfFilter@5b43bbae, org.springframework.security.web.authentication.logout.LogoutFilter@5cc8c82d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@49be300d, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@75a8a84d, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@c497455, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@7c4bd69f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6baef5d6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3ead7086, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@ed89ec4, org.springframework.security.web.access.ExceptionTranslationFilter@6c518879, org.springframework.security.web.access.intercept.AuthorizationFilter@18855935]
2025-06-16 10:57:59 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 10:57:59 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 10:57:59 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.444 seconds (process running for 9.855)
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1fda36ce]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@9c58171]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@866c0f7]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60143cd4]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7c714e24]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 10:57:59 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@13175c49]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60aec678]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@720bfb0b]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2dace478]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@199d82d9]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:57:59 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4cba4f0c]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5cccb09]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@794b2cf2]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 10:57:59 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@40ea07d5]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5d7a26a2]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@4496ee43 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 10:57:59 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60378280]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 10:57:59 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@16dcf831]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5434ed1d, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5434ed1d, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5434ed1d, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5434ed1d, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@1c7dff8a
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@2629a8ee
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@64c0224d]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 10:57:59 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 10:57:59 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 10:57:59 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 10:57:59 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:00:38 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 67282 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:00:38 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:00:41 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:00:44 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:00:44 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:00:44 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:00:44 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:00:44 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:00:44 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 7.086 seconds (process running for 7.577)
2025-06-16 11:00:44 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:00:44 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:00:44 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:00:44 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:00:44 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:00:44 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:00:45 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42122, SQLState: 42S22
2025-06-16 11:00:45 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]
2025-06-16 11:00:45 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]] [/* <criteria> */ select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=?]; SQL [/* <criteria> */ select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=?]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy269.findByUsername(Unknown Source)
	at com.finance.admin.config.AdminUserSeeder.run(AdminUserSeeder.java:33)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:790)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:798)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:774)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]] [/* <criteria> */ select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:564)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy290.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.expression.ExpressionColumn.getColumnException(ExpressionColumn.java:244)
	at org.h2.expression.ExpressionColumn.optimizeOther(ExpressionColumn.java:226)
	at org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:213)
	at org.h2.command.query.Select.prepareExpressions(Select.java:1170)
	at org.h2.command.query.Query.prepare(Query.java:218)
	at org.h2.command.Parser.prepareCommand(Parser.java:489)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 150 common frames omitted
2025-06-16 11:00:47 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@3eb83530]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@67c83c82 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@4a5b1a27 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@479cbee5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@12299890, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@ac15384f, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6986852, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1ef6d34c, org.springframework.boot.test.context.SpringBootTestAnnotation@1909402e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]] [/* <criteria> */ select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=?]; SQL [/* <criteria> */ select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=?]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy269.findByUsername(Unknown Source)
	at com.finance.admin.config.AdminUserSeeder.run(AdminUserSeeder.java:33)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:790)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:83)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:88)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:798)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:789)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:774)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:774)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:341)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]] [/* <criteria> */ select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=?]
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.spi.AbstractSelectionQuery.getSingleResult(AbstractSelectionQuery.java:564)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:415)
	at jdk.proxy2/jdk.proxy2.$Proxy290.getSingleResult(Unknown Source)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$SingleEntityExecution.doExecute(JpaQueryExecution.java:223)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 108 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Column "AU1_0.FORCE_PASSWORD_CHANGE" not found; SQL statement:
select au1_0.id,au1_0.created_at,au1_0.created_by,au1_0.email,au1_0.failed_login_attempts,au1_0.force_password_change,au1_0.last_login,au1_0.last_password_change,au1_0.locked_until,au1_0.mfa_enabled,au1_0.mfa_secret,au1_0.password_expires_at,au1_0.password,au1_0.session_timeout_minutes,au1_0.status,au1_0.updated_at,au1_0.updated_by,au1_0.username,au1_0.version from admin_users au1_0 where au1_0.username=? [42122-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.expression.ExpressionColumn.getColumnException(ExpressionColumn.java:244)
	at org.h2.expression.ExpressionColumn.optimizeOther(ExpressionColumn.java:226)
	at org.h2.expression.ExpressionColumn.optimize(ExpressionColumn.java:213)
	at org.h2.command.query.Select.prepareExpressions(Select.java:1170)
	at org.h2.command.query.Query.prepare(Query.java:218)
	at org.h2.command.Parser.prepareCommand(Parser.java:489)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 150 common frames omitted
2025-06-16 11:00:47 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@5befc078]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@67c83c82 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@4a5b1a27 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@479cbee5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@12299890, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@ac15384f, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6986852, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1ef6d34c, org.springframework.boot.test.context.SpringBootTestAnnotation@1909402e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 11:00:47 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@10cabc89]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@67c83c82 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@4a5b1a27 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@479cbee5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@12299890, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@ac15384f, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6986852, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1ef6d34c, org.springframework.boot.test.context.SpringBootTestAnnotation@1909402e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 11:01:42 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 67492 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:01:42 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:01:46 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:01:49 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:01:49 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:01:49 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:01:49 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:01:49 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:01:49 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 7.203 seconds (process running for 7.75)
2025-06-16 11:01:49 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:01:49 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:01:49 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy261.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:01:49 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:01:49 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:01:49 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy261.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:02:08 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 67599 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:02:08 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:02:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:02:14 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:02:14 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:02:14 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:02:14 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:02:15 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:02:15 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.546 seconds (process running for 7.086)
2025-06-16 11:02:15 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:02:15 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:02:15 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:02:15 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:02:15 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:02:15 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:02:15 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:02:15 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:02:15 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 67599 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:02:15 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:02:16 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:02:17 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:02:17 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:02:17 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:02:17 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:02:17 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:02:17 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.049 seconds (process running for 9.516)
2025-06-16 11:02:17 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:02:17 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:02:17 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:02:17 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:02:17 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:02:17 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:02:17 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5f1925d0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4390416e, org.springframework.security.web.context.SecurityContextHolderFilter@393e206, org.springframework.security.web.header.HeaderWriterFilter@38682e3e, org.springframework.security.web.authentication.logout.LogoutFilter@309dd85a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@25bcbc72, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@39e8696d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6591f744, org.springframework.security.web.session.SessionManagementFilter@da3bd0c, org.springframework.security.web.access.ExceptionTranslationFilter@3b75d17f, org.springframework.security.web.access.intercept.AuthorizationFilter@18ad5d97]
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 58 ms
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:17 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:02:17 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:02:17 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:02:17 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:02:18 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:02:18 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:02:18 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:18 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:18 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:02:18 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:02:18 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:02:18 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:02:18 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 67599 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:02:18 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:02:18 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:02:18 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:02:19 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.721 seconds (process running for 11.61)
2025-06-16 11:02:20 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:02:20 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 67599 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:02:20 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:02:20 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 5e6c0d47-5517-417b-9223-91c90de135af

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:02:20 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@49f85efd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e91e3c9, org.springframework.security.web.context.SecurityContextHolderFilter@642d19f0, org.springframework.security.web.header.HeaderWriterFilter@ee826b3, org.springframework.web.filter.CorsFilter@73bdd69c, org.springframework.security.web.csrf.CsrfFilter@454cde08, org.springframework.security.web.authentication.logout.LogoutFilter@611a6eb8, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@1dad9098, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5023168f, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@234151e2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@5a8155bc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@47b227e3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1f317664, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2845ecc1, org.springframework.security.web.access.ExceptionTranslationFilter@18080a63, org.springframework.security.web.access.intercept.AuthorizationFilter@4ffa98fb]
2025-06-16 11:02:20 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:02:20 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:02:20 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.448 seconds (process running for 12.58)
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1f1bd8e2]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3e96143f]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@74f72846]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4d0276b3]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1a3890c3]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:02:20 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4be50474]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@44454a59]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@58a43964]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@d44cb1]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@29b70e0e]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:02:20 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1f273849]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@11c1cafc]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60681ed1]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:02:20 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@137a768b]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3df4b707]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@40adc291 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:02:20 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6160f7e1]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:02:20 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@45aea5c4]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@dc53bde, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@dc53bde, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@dc53bde, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@dc53bde, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@4535e7c9
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@2253eef6
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@47932faf]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:02:20 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:02:20 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:02:20 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:02:20 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:14:35 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 70095 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:14:35 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:14:38 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:14:40 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:14:40 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:14:40 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:14:40 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:14:41 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:14:41 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.257 seconds (process running for 6.884)
2025-06-16 11:14:41 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:14:41 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:14:41 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:14:41 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:14:41 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:14:41 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:14:41 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:14:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:14:41 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 70095 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:14:41 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:14:42 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:14:43 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:14:43 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:14:43 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:14:43 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:14:43 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:14:43 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.255 seconds (process running for 9.574)
2025-06-16 11:14:44 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:14:44 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:14:44 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:14:44 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:14:44 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:14:44 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:14:44 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@bda9bae, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3fe827c0, org.springframework.security.web.context.SecurityContextHolderFilter@54b258b1, org.springframework.security.web.header.HeaderWriterFilter@3f4c2882, org.springframework.security.web.authentication.logout.LogoutFilter@24bd828c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71ecf516, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7a6754df, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@57a92406, org.springframework.security.web.session.SessionManagementFilter@766739f3, org.springframework.security.web.access.ExceptionTranslationFilter@6591f744, org.springframework.security.web.access.intercept.AuthorizationFilter@a89250d]
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 77 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:14:44 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:14:44 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:14:44 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:14:45 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:14:45 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:14:45 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:14:45 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 70095 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:14:45 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:14:45 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:14:45 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:14:46 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.745 seconds (process running for 11.817)
2025-06-16 11:14:46 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:14:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:14:46 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 70095 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:14:46 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:14:46 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:14:46 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:14:46 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ba571efd-c9b4-4997-9805-88debb2efbd3

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:14:46 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4a2a038b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@21649eb, org.springframework.security.web.context.SecurityContextHolderFilter@35f06dfd, org.springframework.security.web.header.HeaderWriterFilter@41958eff, org.springframework.web.filter.CorsFilter@296f37af, org.springframework.security.web.csrf.CsrfFilter@5199d666, org.springframework.security.web.authentication.logout.LogoutFilter@4fa6e2de, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@3285eb2c, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@22f2326c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@78d1d1d2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@3a0d7c4c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2ac5a7c3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ffdaf1a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@62fda318, org.springframework.security.web.access.ExceptionTranslationFilter@3b9bd8d1, org.springframework.security.web.access.intercept.AuthorizationFilter@6f7046c8]
2025-06-16 11:14:47 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:14:47 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:14:47 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.364 seconds (process running for 12.609)
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6bd6a913]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@39262d61]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@390fd264]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@98192a4]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@d44cb1]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:14:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5f3a48fc]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7b46c968]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5bc93a83]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7c72f9a]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@25ec3af6]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:14:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@515ec50c]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@78324a5f]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@73cd3128]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:14:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6a44481b]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5e311b2f]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@110b0e7b and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:14:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@52df13f7]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:14:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@13bf12bc]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@52e4d3ac, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@52e4d3ac, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@52e4d3ac, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@52e4d3ac, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@41d18d1
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@212f9511
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2e57151]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:14:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:14:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:14:47 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:14:47 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:14:47 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:14:47 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:14:47 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:14:47 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:14:47 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:16:42 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 70533 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:16:42 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:16:45 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:16:48 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:16:48 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:16:48 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:16:48 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:16:49 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:16:49 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.714 seconds (process running for 7.222)
2025-06-16 11:16:49 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:16:49 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:16:49 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:16:49 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:16:49 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:16:49 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:16:49 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:16:49 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:16:49 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 70533 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:16:49 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:16:50 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:16:51 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:16:51 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:16:51 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:16:51 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:16:51 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:16:51 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.092 seconds (process running for 9.719)
2025-06-16 11:16:51 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:16:51 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:16:51 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:16:51 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:16:51 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:16:51 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:16:52 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4bb8b2b1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@d573ad4, org.springframework.security.web.context.SecurityContextHolderFilter@3f4c2882, org.springframework.security.web.header.HeaderWriterFilter@16d94853, org.springframework.security.web.authentication.logout.LogoutFilter@2880de14, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26d84732, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12cdd3e8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c373de9, org.springframework.security.web.session.SessionManagementFilter@ac35cb4, org.springframework.security.web.access.ExceptionTranslationFilter@184a2612, org.springframework.security.web.access.intercept.AuthorizationFilter@24bd828c]
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 54 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /auth/health
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint GET /auth/health.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/verify-mfa
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/verify-mfa.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/verify-mfa
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/verify-mfa.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/logout
2025-06-16 11:16:52 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/logout.
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:52 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:52 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:53 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:16:53 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:16:53 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:16:53 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:16:53 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 70533 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:16:53 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:16:53 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:16:53 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:16:54 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.982 seconds (process running for 12.265)
2025-06-16 11:16:55 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:16:55 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 70533 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:16:55 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:16:55 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 212f4696-9b66-4e97-98c0-5e054e10c6fb

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:16:55 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1181c370, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5a548f22, org.springframework.security.web.context.SecurityContextHolderFilter@3be982f0, org.springframework.security.web.header.HeaderWriterFilter@7a56c26, org.springframework.web.filter.CorsFilter@72f2bccf, org.springframework.security.web.csrf.CsrfFilter@33fb03c1, org.springframework.security.web.authentication.logout.LogoutFilter@922dc8d, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@5f36d878, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6a48bd69, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6f0399c7, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1f904f91, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@50e77b47, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@46203dd7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@70864d14, org.springframework.security.web.access.ExceptionTranslationFilter@7afd9591, org.springframework.security.web.access.intercept.AuthorizationFilter@2df8b314]
2025-06-16 11:16:55 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:16:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:16:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.487 seconds (process running for 13.394)
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@112f4045]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@11dc361b]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@58a43964]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60b9edc8]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@66f46053]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:16:55 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@327d0244]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@11e2b8ac]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@57e9c3eb]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@590add3b]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@247d2905]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:16:55 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@13202160]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@443b505d]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1f7bd658]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:16:55 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@8c4a6f6]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1d413cf2]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@a3e9ebd and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:16:55 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7ee962c0]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:16:55 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@30508ad2]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@2629f46c, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@2629f46c, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@2629f46c, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@2629f46c, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@7b82e26e
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@3cb64944
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3433288e]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:16:55 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:16:55 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:16:55 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:16:55 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:16:56 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 70615 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:16:56 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:16:59 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:17:02 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:17:02 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:17:02 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:17:02 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:17:03 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:17:03 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 7.391 seconds (process running for 7.984)
2025-06-16 11:17:03 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:17:03 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:17:03 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:17:03 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:17:03 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:17:03 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:17:03 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2abdbc36, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2c334b86, org.springframework.security.web.context.SecurityContextHolderFilter@18b47f72, org.springframework.security.web.header.HeaderWriterFilter@4a70813d, org.springframework.security.web.authentication.logout.LogoutFilter@425e2b8b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@438b76dc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@68baca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1817acb, org.springframework.security.web.session.SessionManagementFilter@6be5da24, org.springframework.security.web.access.ExceptionTranslationFilter@5ff11d7b, org.springframework.security.web.access.intercept.AuthorizationFilter@4ebd918]
2025-06-16 11:17:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:17:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 54 ms
2025-06-16 11:17:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:17:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:17:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:17:03 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:18:00 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 70816 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:00 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:18:02 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:18:06 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:18:06 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:18:06 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:18:06 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:18:06 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:18:06 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.863 seconds (process running for 7.424)
2025-06-16 11:18:06 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:06 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:18:06 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:18:06 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:06 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:18:06 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:18:07 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@457e7c5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7192a77e, org.springframework.security.web.context.SecurityContextHolderFilter@3f9dca01, org.springframework.security.web.header.HeaderWriterFilter@64c30a1e, org.springframework.security.web.authentication.logout.LogoutFilter@2f161e94, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7bd40d23, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@23d0c264, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4d212d8c, org.springframework.security.web.session.SessionManagementFilter@71e9be99, org.springframework.security.web.access.ExceptionTranslationFilter@2d8105e0, org.springframework.security.web.access.intercept.AuthorizationFilter@4c85d6b7]
2025-06-16 11:18:07 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@8b71391, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@49cefd81, org.springframework.security.web.context.SecurityContextHolderFilter@60ea6f69, org.springframework.security.web.header.HeaderWriterFilter@7ed680d2, org.springframework.security.web.authentication.logout.LogoutFilter@73c65fd1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e62bded, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@34f862e3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@51ba99a8, org.springframework.security.web.session.SessionManagementFilter@77807d12, org.springframework.security.web.access.ExceptionTranslationFilter@1c1050c1, org.springframework.security.web.access.intercept.AuthorizationFilter@6f388f1c]
2025-06-16 11:18:07 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 64 ms
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:18:07 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:18:07 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:18:07 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:18:07 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:18:07 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:18:07 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:18:07 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: invalid, Error: Invalid username or password
2025-06-16 11:18:07 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:07 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:18:07 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:18:07 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:18:07 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:18:07 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:18:24 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 70967 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:24 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:18:27 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 71000 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:27 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:18:28 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:18:31 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:18:31 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:18:31 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:18:31 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:18:31 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:18:32 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:18:32 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 8.521 seconds (process running for 8.971)
2025-06-16 11:18:32 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:32 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:18:32 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:18:32 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:32 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:18:32 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:18:33 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:18:33 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:18:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 70967 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:18:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:18:35 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:18:35 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:18:35 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:18:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:18:35 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:18:35 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:18:35 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:18:35 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:18:35 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.661 seconds (process running for 12.271)
2025-06-16 11:18:35 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:35 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:18:35 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:18:35 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:35 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:18:35 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy263.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:18:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:18:36 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4deef77b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@26f4e3df, org.springframework.security.web.context.SecurityContextHolderFilter@7a2107aa, org.springframework.security.web.header.HeaderWriterFilter@5ebc68ef, org.springframework.security.web.authentication.logout.LogoutFilter@4f72cfb3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a46c3b9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@475d0d72, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6c06fdb5, org.springframework.security.web.session.SessionManagementFilter@5844c027, org.springframework.security.web.access.ExceptionTranslationFilter@69cd6a8, org.springframework.security.web.access.intercept.AuthorizationFilter@70bad819]
2025-06-16 11:18:36 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@78b0c3be, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@9d70132, org.springframework.security.web.context.SecurityContextHolderFilter@6cfa4b1e, org.springframework.security.web.header.HeaderWriterFilter@58c1523b, org.springframework.security.web.authentication.logout.LogoutFilter@130c4351, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6a783b48, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38faecb6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1d86558b, org.springframework.security.web.session.SessionManagementFilter@2a2ebb4, org.springframework.security.web.access.ExceptionTranslationFilter@6d4d7930, org.springframework.security.web.access.intercept.AuthorizationFilter@57f54ce9]
2025-06-16 11:18:36 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 83 ms
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:18:36 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:18:36 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:18:36 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 8.872 seconds (process running for 9.592)
2025-06-16 11:18:36 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:36 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:18:36 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:18:36 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:18:36 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:18:36 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:36 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:18:36 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:18:36 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:18:36 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:18:36 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:18:36 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: invalid, Error: Invalid username or password
2025-06-16 11:18:36 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:18:36 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:18:36 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:18:36 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:18:36 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:18:37 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:18:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:18:37 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 71000 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:37 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:18:37 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:18:38 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:18:38 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:18:38 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:18:38 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:18:39 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:18:39 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.027 seconds (process running for 12.167)
2025-06-16 11:18:39 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:39 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:18:39 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:18:39 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:18:39 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:18:39 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:18:39 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5c4b489b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3618aece, org.springframework.security.web.context.SecurityContextHolderFilter@598166e3, org.springframework.security.web.header.HeaderWriterFilter@584f5725, org.springframework.security.web.authentication.logout.LogoutFilter@58de09c1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ef6a00e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ea541c6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3f02e0d2, org.springframework.security.web.session.SessionManagementFilter@3042bc11, org.springframework.security.web.access.ExceptionTranslationFilter@3ff29102, org.springframework.security.web.access.intercept.AuthorizationFilter@21e8b6c2]
2025-06-16 11:18:39 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e39ce84, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@68b94ce1, org.springframework.security.web.context.SecurityContextHolderFilter@48f1fcf7, org.springframework.security.web.header.HeaderWriterFilter@43d33c7d, org.springframework.security.web.authentication.logout.LogoutFilter@288dd963, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10d3ff78, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ab919cb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@193bd1b0, org.springframework.security.web.session.SessionManagementFilter@1b37def1, org.springframework.security.web.access.ExceptionTranslationFilter@33bd78e1, org.springframework.security.web.access.intercept.AuthorizationFilter@25dfe95a]
2025-06-16 11:18:39 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 61 ms
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:18:39 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:18:39 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:18:39 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:18:39 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:18:39 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:18:39 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:18:39 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: invalid, Error: Invalid username or password
2025-06-16 11:18:39 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:18:39 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:18:39 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:18:39 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:18:39 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /auth/health
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint GET /auth/health.
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/verify-mfa
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/verify-mfa.
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/verify-mfa
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/verify-mfa.
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/logout
2025-06-16 11:18:39 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/logout.
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:18:40 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:18:40 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:18:40 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:18:40 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 71000 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:40 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:18:40 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:18:40 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:18:41 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.664 seconds (process running for 14.514)
2025-06-16 11:18:41 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:18:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:18:41 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 71000 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:18:41 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:18:41 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:18:42 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:18:42 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ed6821e8-5659-427d-a255-0fd8b94f7d12

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:18:42 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7b3608a2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@52ca6b0c, org.springframework.security.web.context.SecurityContextHolderFilter@48405785, org.springframework.security.web.header.HeaderWriterFilter@2fc31040, org.springframework.web.filter.CorsFilter@57363ca7, org.springframework.security.web.csrf.CsrfFilter@27412435, org.springframework.security.web.authentication.logout.LogoutFilter@1d9b90a0, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2f76c6d5, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@1537e247, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@6e52f0ac, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@c86bb66, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@668ea234, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@22c1a74f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@256a86dc, org.springframework.security.web.access.ExceptionTranslationFilter@129ac228, org.springframework.security.web.access.intercept.AuthorizationFilter@a96a23c]
2025-06-16 11:18:42 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:18:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:18:42 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.331 seconds (process running for 15.273)
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@770b4097]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@173a1d3e]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3d6a6dbe]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@c47e6bb]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@78dc5984]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:18:42 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@34443130]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1a63673]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@31e4b632]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5dcdb591]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1ecb233d]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:18:42 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@9eec57c]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@edcd10c]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@61daea3c]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:18:42 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4d63584d]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@29131a0b]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@bb950a2 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:18:42 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@a4d55f8]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:18:42 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3e96143f]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@26089e22, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@26089e22, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@26089e22, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@26089e22, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@38125188
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@74ee246a
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1d7f91c8]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:18:42 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:18:42 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:18:42 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:18:42 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:18:42 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:18:42 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:18:42 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:18:42 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:18:42 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:19:26 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 71227 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:19:26 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:19:29 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:19:32 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:19:32 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:19:32 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:19:32 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:19:32 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:19:32 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.733 seconds (process running for 7.344)
2025-06-16 11:19:33 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:19:33 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:19:33 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:19:33 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:19:33 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:19:33 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:19:33 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:19:33 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:19:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 71227 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:19:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:19:33 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:19:35 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:19:35 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:19:35 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:19:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:19:35 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:19:35 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.202 seconds (process running for 9.957)
2025-06-16 11:19:35 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:19:35 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:19:35 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:19:35 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:19:35 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:19:35 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:19:35 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@58de09c1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@26721bf2, org.springframework.security.web.context.SecurityContextHolderFilter@56857491, org.springframework.security.web.header.HeaderWriterFilter@39d9a6d7, org.springframework.security.web.authentication.logout.LogoutFilter@41fdd23d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@584f5725, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b580610, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37aff11f, org.springframework.security.web.session.SessionManagementFilter@1a7eeea9, org.springframework.security.web.access.ExceptionTranslationFilter@1355d38c, org.springframework.security.web.access.intercept.AuthorizationFilter@54c485bb]
2025-06-16 11:19:35 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3618aece, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f02e0d2, org.springframework.security.web.context.SecurityContextHolderFilter@ecb4926, org.springframework.security.web.header.HeaderWriterFilter@3a4ed5cd, org.springframework.security.web.authentication.logout.LogoutFilter@72cf7b84, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6d44f61a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@21e8b6c2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@af9867c, org.springframework.security.web.session.SessionManagementFilter@18b3f8b7, org.springframework.security.web.access.ExceptionTranslationFilter@28397aa7, org.springframework.security.web.access.intercept.AuthorizationFilter@5c4b489b]
2025-06-16 11:19:35 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:19:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 63 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:19:36 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:19:36 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:19:36 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:19:36 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:19:36 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:19:36 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:19:36 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: invalid, Error: Invalid username or password
2025-06-16 11:19:36 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:19:36 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:19:36 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:19:36 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /auth/health
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint GET /auth/health.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/verify-mfa
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/verify-mfa.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/login
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/login.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/verify-mfa
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/verify-mfa.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /auth/logout
2025-06-16 11:19:36 [main] WARN  o.s.web.servlet.PageNotFound - No endpoint POST /auth/logout.
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] ]
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:36 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:36 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:19:37 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:19:37 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:19:37 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:19:37 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 71227 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:19:37 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:19:37 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:19:37 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.711 seconds (process running for 12.22)
2025-06-16 11:19:38 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:19:38 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 71227 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:19:38 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:19:38 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: a34f36df-fb81-4e0c-afc7-06317e2fbb5c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:19:38 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@57063cc7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7db2b9be, org.springframework.security.web.context.SecurityContextHolderFilter@2926415e, org.springframework.security.web.header.HeaderWriterFilter@72a73853, org.springframework.web.filter.CorsFilter@ae19c04, org.springframework.security.web.csrf.CsrfFilter@547d9c1e, org.springframework.security.web.authentication.logout.LogoutFilter@364532b3, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@13835d38, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5587767b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@228d875, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2ea4cca9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1103a508, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1ea9b05d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@64ae3cf3, org.springframework.security.web.access.ExceptionTranslationFilter@13f38ac7, org.springframework.security.web.access.intercept.AuthorizationFilter@741d839b]
2025-06-16 11:19:38 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:19:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:19:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.346 seconds (process running for 12.979)
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@20aecfd]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7a56c26]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@119b40b2]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@71724cef]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@24bcf92c]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:19:38 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3b78431b]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@32d18431]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@73a3df96]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@77c918c3]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@587e72a1]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:19:38 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5cd43d16]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@11d01a63]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7e54bb82]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:19:38 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5833b325]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@347bbdd6]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@3bb9bd69 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:19:38 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@300d5510]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:19:38 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@610824b]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@129b474e, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@129b474e, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@129b474e, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@129b474e, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@62cf564f
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@da53ceb
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@131e5853]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:19:38 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:19:38 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:19:38 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:19:38 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:24:18 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 72897 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:24:18 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:24:21 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:24:23 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:24:23 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:24:23 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:24:24 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:24:24 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:24:24 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.481 seconds (process running for 7.113)
2025-06-16 11:24:24 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:24:24 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:24:24 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:24:24 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:24:24 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:24:24 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:24:24 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:24:24 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:24:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 72897 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:24:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:24:25 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:24:26 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:24:26 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:24:26 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:24:26 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:24:26 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:24:26 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 1.997 seconds (process running for 9.505)
2025-06-16 11:24:26 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:24:26 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:24:26 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:24:26 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:24:26 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:24:26 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:24:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@70028d75, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6f85e211, org.springframework.security.web.context.SecurityContextHolderFilter@5624ec7e, org.springframework.security.web.header.HeaderWriterFilter@2a8c00f4, org.springframework.security.web.authentication.logout.LogoutFilter@259fba09, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a7eeea9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1151b3f6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@8fa0f22, org.springframework.security.web.session.SessionManagementFilter@3c659d8f, org.springframework.security.web.access.ExceptionTranslationFilter@33706f61, org.springframework.security.web.access.intercept.AuthorizationFilter@4fcb4a6e]
2025-06-16 11:24:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b37def1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@48f1fcf7, org.springframework.security.web.context.SecurityContextHolderFilter@3618aece, org.springframework.security.web.header.HeaderWriterFilter@6d44f61a, org.springframework.security.web.authentication.logout.LogoutFilter@2bbb74a7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@cf01828, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@114d741b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10d3ff78, org.springframework.security.web.session.SessionManagementFilter@72cf7b84, org.springframework.security.web.access.ExceptionTranslationFilter@3a4ed5cd, org.springframework.security.web.access.intercept.AuthorizationFilter@43d33c7d]
2025-06-16 11:24:27 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 57 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:24:27 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:24:27 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:24:27 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:24:27 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:24:27 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: invalid, Error: Invalid username or password
2025-06-16 11:24:27 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:24:27 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:24:27 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:24:27 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:24:27 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:24:27 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:24:27 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:24:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:24:28 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:24:28 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:24:28 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 72897 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:24:28 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:24:28 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:24:28 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.702 seconds (process running for 11.727)
2025-06-16 11:24:29 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:24:29 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 72897 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:24:29 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:24:29 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:24:29 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 18ea21cb-fbe4-405c-84a6-dfedf968d46b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:24:29 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@26012a7d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@22b28ef, org.springframework.security.web.context.SecurityContextHolderFilter@3e9bbd53, org.springframework.security.web.header.HeaderWriterFilter@1d9b90a0, org.springframework.web.filter.CorsFilter@2ddf9cfa, org.springframework.security.web.csrf.CsrfFilter@63d9d8cc, org.springframework.security.web.authentication.logout.LogoutFilter@7b7cdcd7, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@7b3608a2, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2a81f89b, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@1af0e34a, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@4acfaae9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13290df4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b5e7bc0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@358d60ab, org.springframework.security.web.access.ExceptionTranslationFilter@49562b2a, org.springframework.security.web.access.intercept.AuthorizationFilter@c86bb66]
2025-06-16 11:24:29 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:24:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:24:29 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.346 seconds (process running for 12.57)
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@345b0bc4]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@21231ca5]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@36316ab3]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@49e83e1]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@26a59e6e]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:24:29 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:29 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:29 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:24:29 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@37f78a9]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@31e4b632]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4c48f8b1]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1ecb233d]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1312fe50]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:24:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@edcd10c]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@425754aa]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3724095c]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:24:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@aefbe2d]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@21877e70]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@22176b52 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:24:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@32a1d68a]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:24:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@631458cb]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5aa98e0a, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5aa98e0a, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5aa98e0a, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5aa98e0a, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@a3eaaae
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@1d7f91c8
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6a1622ed]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:24:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:24:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:24:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:24:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:24:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:24:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:24:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:24:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:24:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:26:04 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 74209 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:26:04 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:26:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:26:09 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:26:09 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:26:09 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:26:10 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:26:10 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:26:10 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.439 seconds (process running for 7.042)
2025-06-16 11:26:10 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:26:10 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:26:10 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:26:10 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:26:10 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:26:10 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:26:10 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:26:10 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:26:11 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 74209 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:26:11 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:26:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:26:12 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:26:12 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:26:12 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:26:12 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:26:12 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:26:12 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.003 seconds (process running for 9.426)
2025-06-16 11:26:13 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:26:13 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:26:13 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:26:13 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:26:13 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:26:13 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:26:13 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@124b91dc, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@31f073a5, org.springframework.security.web.context.SecurityContextHolderFilter@2e39ce84, org.springframework.security.web.header.HeaderWriterFilter@7f6da9a6, org.springframework.security.web.authentication.logout.LogoutFilter@3978b40c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2359d5e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@26b7e90b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d19d0a1, org.springframework.security.web.session.SessionManagementFilter@4ab919cb, org.springframework.security.web.access.ExceptionTranslationFilter@72cf7b84, org.springframework.security.web.access.intercept.AuthorizationFilter@58e7633]
2025-06-16 11:26:13 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@15e00bc9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@53144c74, org.springframework.security.web.context.SecurityContextHolderFilter@8422c70, org.springframework.security.web.header.HeaderWriterFilter@61ea2988, org.springframework.security.web.authentication.logout.LogoutFilter@809c776, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@685eaa5f, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58c868b5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@21ed534, org.springframework.security.web.session.SessionManagementFilter@3a9532b, org.springframework.security.web.access.ExceptionTranslationFilter@70a21bdc, org.springframework.security.web.access.intercept.AuthorizationFilter@e0ec7bc]
2025-06-16 11:26:13 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 54 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:26:13 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:26:13 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:26:13 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:26:13 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:26:13 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: invalid, Error: Invalid username or password
2025-06-16 11:26:13 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:26:13 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:26:13 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:26:13 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:26:13 [main] ERROR c.f.a.auth.controller.AuthController - Login failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:26:13 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid MFA code
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:26:13 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:13 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:14 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:26:14 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:26:14 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:26:14 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:26:14 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 74209 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:26:14 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:26:14 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:26:14 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:26:15 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.768 seconds (process running for 11.796)
2025-06-16 11:26:15 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:26:15 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:26:15 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 74209 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:26:15 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:26:15 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:26:16 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:26:16 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 8b941d1e-2414-453d-bc9e-961062fb5ec4

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:26:16 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2a01caf3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@680997fa, org.springframework.security.web.context.SecurityContextHolderFilter@13232acc, org.springframework.security.web.header.HeaderWriterFilter@2752da6e, org.springframework.web.filter.CorsFilter@270cc519, org.springframework.security.web.csrf.CsrfFilter@736b2b73, org.springframework.security.web.authentication.logout.LogoutFilter@2069f59c, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@25667a52, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@7183ae7a, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@21a7e7d9, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2074cb3a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@39b9ab68, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@40339db8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@555e74c, org.springframework.security.web.access.ExceptionTranslationFilter@6a227a35, org.springframework.security.web.access.intercept.AuthorizationFilter@5a359944]
2025-06-16 11:26:16 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:26:16 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:26:16 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.372 seconds (process running for 12.617)
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@454cde08]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@70e0a31a]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@38f5988c]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1147562]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@34f3565]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:26:16 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@77650781]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@684e4875]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@461de7d4]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1b06938c]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4775c0e1]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:26:16 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@714d9280]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@a0148e1]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@102a3572]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:26:16 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@da53ceb]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@61ad4d40]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@75ef2bec and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:26:16 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@153aeb2b]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:26:16 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6a1622ed]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@a3043f3, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@a3043f3, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@a3043f3, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@a3043f3, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@56ffbaca
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@39edc99
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@10d7d04e]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:26:16 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:26:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:26:16 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:26:16 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:26:16 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:26:16 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:26:16 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:26:16 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:26:16 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:28:17 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 74596 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:28:17 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:28:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:28:23 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:28:23 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:28:23 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:28:23 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:28:24 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:28:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.919 seconds (process running for 7.688)
2025-06-16 11:28:24 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:28:24 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:28:24 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:28:24 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:28:24 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:28:24 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:28:24 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4dc7c831, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4b367665, org.springframework.security.web.context.SecurityContextHolderFilter@6636cbb6, org.springframework.security.web.header.HeaderWriterFilter@596eca69, org.springframework.security.web.authentication.logout.LogoutFilter@255b1aef, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ab09b04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2e67ef84, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@659c84b8, org.springframework.security.web.session.SessionManagementFilter@31700b31, org.springframework.security.web.access.ExceptionTranslationFilter@275d9800, org.springframework.security.web.access.intercept.AuthorizationFilter@129003e8]
2025-06-16 11:28:24 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@60d76531, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d902e0d, org.springframework.security.web.context.SecurityContextHolderFilter@76b65114, org.springframework.security.web.header.HeaderWriterFilter@2822d49a, org.springframework.security.web.authentication.logout.LogoutFilter@55b1156b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@71b4b729, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f8c2b81, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7b569c11, org.springframework.security.web.session.SessionManagementFilter@7884c3b4, org.springframework.security.web.access.ExceptionTranslationFilter@4d695d86, org.springframework.security.web.access.intercept.AuthorizationFilter@2f161e94]
2025-06-16 11:28:24 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:24 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:24 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 72 ms
2025-06-16 11:28:24 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:24 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:28:24 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:24 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:28:24 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:28:25 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:28:25 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:28:25 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:25 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:28:25 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:25 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:28:25 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:28:25 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:28:25 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:25 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:28:25 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:28:25 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:28:25 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:28:29 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 74679 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:28:29 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:28:32 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:28:35 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:28:35 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:28:35 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:28:35 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:28:35 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:28:35 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.301 seconds (process running for 6.909)
2025-06-16 11:28:35 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:28:35 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:28:35 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:28:35 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:28:35 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:28:35 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:28:36 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:28:36 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:28:36 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 74679 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:28:36 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:28:36 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:28:38 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:28:38 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:28:38 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:28:38 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:28:38 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:28:38 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 1.997 seconds (process running for 9.3)
2025-06-16 11:28:38 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:28:38 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:28:38 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:28:38 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:28:38 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:28:38 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:28:38 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3618aece, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f02e0d2, org.springframework.security.web.context.SecurityContextHolderFilter@151d762e, org.springframework.security.web.header.HeaderWriterFilter@25138eea, org.springframework.security.web.authentication.logout.LogoutFilter@26721bf2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@259fba09, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5987ecc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@af9867c, org.springframework.security.web.session.SessionManagementFilter@36ea2c05, org.springframework.security.web.access.ExceptionTranslationFilter@2321373b, org.springframework.security.web.access.intercept.AuthorizationFilter@26999408]
2025-06-16 11:28:38 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24c7c71b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@498ef4f8, org.springframework.security.web.context.SecurityContextHolderFilter@4baccee8, org.springframework.security.web.header.HeaderWriterFilter@193bd1b0, org.springframework.security.web.authentication.logout.LogoutFilter@37bb43f8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@607b1088, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3ab4b08, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214c854c, org.springframework.security.web.session.SessionManagementFilter@1a54b2e, org.springframework.security.web.access.ExceptionTranslationFilter@25dfe95a, org.springframework.security.web.access.intercept.AuthorizationFilter@56d6133b]
2025-06-16 11:28:38 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 56 ms
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:28:38 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:28:38 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:28:38 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:28:38 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:28:38 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:28:38 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:28:38 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:28:38 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:28:38 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:38 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:38 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:39 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Invalid username or password
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:28:39 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during MFA verification: Invalid MFA code
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:28:39 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] ]
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:39 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:28:39 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:28:39 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:28:39 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:28:39 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 74679 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:28:39 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:28:39 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:28:40 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:28:40 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.735 seconds (process running for 11.62)
2025-06-16 11:28:41 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:28:41 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 74679 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:28:41 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:28:41 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 6daa69ac-26e0-4886-9c02-b39b96493c0f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:28:41 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7f1df943, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b6cb7e0, org.springframework.security.web.context.SecurityContextHolderFilter@1a6810da, org.springframework.security.web.header.HeaderWriterFilter@71f07b23, org.springframework.web.filter.CorsFilter@6504d70b, org.springframework.security.web.csrf.CsrfFilter@d5171e8, org.springframework.security.web.authentication.logout.LogoutFilter@50cf0f4f, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@2fc6182b, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2d084622, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2cbdba97, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@263df9ad, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c30ec4e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5f531788, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3cfa89a2, org.springframework.security.web.access.ExceptionTranslationFilter@47609818, org.springframework.security.web.access.intercept.AuthorizationFilter@46c47c34]
2025-06-16 11:28:41 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:28:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:28:41 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.335 seconds (process running for 12.474)
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3533927c]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5d52740e]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1e896ff]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6617456]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1d5d6ec5]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:28:41 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1900f31c]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@45ed5fe1]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7e54bb82]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@363ab214]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7614e3cc]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:28:41 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@610824b]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3329f837]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4c06c286]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:28:41 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@50639d25]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2e0f2052]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@714d9280 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:28:41 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@544efcff]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:28:41 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3937afd6]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@283c6af8, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@283c6af8, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@283c6af8, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@283c6af8, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@3b62973f
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4d7fda4e
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7fc39cd0]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:28:41 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:28:41 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:28:41 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:28:41 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:30:27 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 75046 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:30:27 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:30:29 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:30:33 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:30:33 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:30:33 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:30:33 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:30:34 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 75103 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:30:34 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:30:34 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:30:34 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 7.525 seconds (process running for 8.225)
2025-06-16 11:30:34 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:30:34 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:30:34 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:30:34 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:30:34 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:30:34 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:30:35 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7c7a5fc4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5f5a1f71, org.springframework.security.web.context.SecurityContextHolderFilter@38d394e7, org.springframework.security.web.header.HeaderWriterFilter@79a17158, org.springframework.security.web.authentication.logout.LogoutFilter@65afa71d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4ada51cd, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@70a206a9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4dc7c831, org.springframework.security.web.session.SessionManagementFilter@28a87258, org.springframework.security.web.access.ExceptionTranslationFilter@636280d2, org.springframework.security.web.access.intercept.AuthorizationFilter@78366e28]
2025-06-16 11:30:35 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1e8fd0b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2f161e94, org.springframework.security.web.context.SecurityContextHolderFilter@2822d49a, org.springframework.security.web.header.HeaderWriterFilter@2f742911, org.springframework.security.web.authentication.logout.LogoutFilter@4f8c2b81, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7884c3b4, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@76b65114, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@60d76531, org.springframework.security.web.session.SessionManagementFilter@4d695d86, org.springframework.security.web.access.ExceptionTranslationFilter@7454845e, org.springframework.security.web.access.intercept.AuthorizationFilter@55b1156b]
2025-06-16 11:30:35 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 77 ms
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:35 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:30:35 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:30:35 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:30:35 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:35 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:30:35 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:30:35 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:30:35 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:35 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2025-06-16 11:30:35 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:30:35 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:30:35 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:30:35 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:30:38 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:30:40 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:30:41 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:30:41 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:30:41 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:30:41 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:30:41 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 8.006 seconds (process running for 8.681)
2025-06-16 11:30:42 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:30:42 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:30:42 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:30:42 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:30:42 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:30:42 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:30:42 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:30:42 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:30:42 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 75103 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:30:42 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:30:42 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:30:43 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:30:43 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:30:43 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:30:44 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:30:44 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:30:44 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 1.829 seconds (process running for 10.925)
2025-06-16 11:30:44 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:30:44 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:30:44 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:30:44 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:30:44 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:30:44 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:30:44 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1689c6b0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b370444, org.springframework.security.web.context.SecurityContextHolderFilter@41fdd23d, org.springframework.security.web.header.HeaderWriterFilter@3324b09b, org.springframework.security.web.authentication.logout.LogoutFilter@8754546, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a39cd0c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@66690f6d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33bd78e1, org.springframework.security.web.session.SessionManagementFilter@5d0fc384, org.springframework.security.web.access.ExceptionTranslationFilter@7915d61d, org.springframework.security.web.access.intercept.AuthorizationFilter@56cd6848]
2025-06-16 11:30:44 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@56d6133b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@24c7c71b, org.springframework.security.web.context.SecurityContextHolderFilter@26b7e90b, org.springframework.security.web.header.HeaderWriterFilter@1a54b2e, org.springframework.security.web.authentication.logout.LogoutFilter@1acd05c7, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4baccee8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@607b1088, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@498ef4f8, org.springframework.security.web.session.SessionManagementFilter@4654acfb, org.springframework.security.web.access.ExceptionTranslationFilter@2359d5e0, org.springframework.security.web.access.intercept.AuthorizationFilter@f7cead7]
2025-06-16 11:30:44 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:44 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 118 ms
2025-06-16 11:30:44 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:44 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:30:44 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:44 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:30:45 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:30:45 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:30:45 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:30:45 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:30:45 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:30:45 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:30:45 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:30:45 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:30:45 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:45 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Invalid username or password
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:30:45 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during MFA verification: Invalid MFA code
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:30:45 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:30:45 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] ]
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:45 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:45 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:30:46 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:46 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:30:46 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:46 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:30:46 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:30:46 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:30:46 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:30:46 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 75103 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:30:46 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:30:46 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:30:46 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.727 seconds (process running for 13.716)
2025-06-16 11:30:47 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:30:47 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 75103 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:30:47 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:30:47 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:30:47 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: fdce848f-e053-41af-85f8-b4a5a0433951

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:30:47 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1c30ec4e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5f531788, org.springframework.security.web.context.SecurityContextHolderFilter@7b3608a2, org.springframework.security.web.header.HeaderWriterFilter@c86bb66, org.springframework.web.filter.CorsFilter@2d084622, org.springframework.security.web.csrf.CsrfFilter@5cdea161, org.springframework.security.web.authentication.logout.LogoutFilter@4acfaae9, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@22a47dd7, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6e52f0ac, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@773c7d99, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@1a6810da, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@52ca6b0c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@57363ca7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6cf5bdac, org.springframework.security.web.access.ExceptionTranslationFilter@59db8446, org.springframework.security.web.access.intercept.AuthorizationFilter@3f5323c4]
2025-06-16 11:30:47 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:30:47 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:30:47 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.333 seconds (process running for 14.589)
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4c537dd6]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@548ca728]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7e106898]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7fcb7fe7]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3dce89da]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:30:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3f3539c7]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2951aa9a]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@445a2418]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60b84279]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@57433a11]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:30:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3f73bb46]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@21368180]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@352a80a2]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:30:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@bb950a2]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4a1ed99d]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@206d375f and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:30:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2e0f2052]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:30:47 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4b3fe3ad]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@41563926, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@41563926, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@41563926, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@41563926, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@1d9b90a0
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@59b70668
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@54e8bc0f]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:30:47 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:30:47 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:30:47 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:30:48 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:30:48 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:30:48 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:30:48 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:30:48 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:30:48 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:30:48 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:32:27 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 75441 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:32:27 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:32:29 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:32:32 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:32:32 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:32:32 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:32:32 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:32:33 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:32:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.354 seconds (process running for 6.829)
2025-06-16 11:32:33 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:32:33 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:32:33 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:32:33 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:32:33 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:32:33 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:32:33 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@613abdc9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@60024c12, org.springframework.security.web.context.SecurityContextHolderFilter@70a206a9, org.springframework.security.web.header.HeaderWriterFilter@4cd56c1a, org.springframework.security.web.authentication.logout.LogoutFilter@581323d6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36fc08, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63045c76, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1f384329, org.springframework.security.web.session.SessionManagementFilter@6636cbb6, org.springframework.security.web.access.ExceptionTranslationFilter@79a17158, org.springframework.security.web.access.intercept.AuthorizationFilter@4b367665]
2025-06-16 11:32:33 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3d271b2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4cabd3cd, org.springframework.security.web.context.SecurityContextHolderFilter@1e8fd0b, org.springframework.security.web.header.HeaderWriterFilter@114bd8a7, org.springframework.security.web.authentication.logout.LogoutFilter@7b569c11, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f161e94, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60d76531, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@76405c4e, org.springframework.security.web.session.SessionManagementFilter@55b1156b, org.springframework.security.web.access.ExceptionTranslationFilter@4f8c2b81, org.springframework.security.web.access.intercept.AuthorizationFilter@3f0ed018]
2025-06-16 11:32:33 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:32:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:32:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 72 ms
2025-06-16 11:32:33 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:32:33 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:32:33 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:32:33 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:32:34 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:32:34 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:32:34 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:32:34 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:32:34 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2025-06-16 11:32:34 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:32:34 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:32:34 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:32:34 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:32:34 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:32:34 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:32:34 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:32:34 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:32:34 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:32:34 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:32:34 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:32:34 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:32:34 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:34:25 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 75780 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:34:25 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:34:28 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:34:31 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:34:31 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:34:31 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:34:31 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:34:32 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:34:32 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.983 seconds (process running for 7.503)
2025-06-16 11:34:32 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:34:32 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:34:32 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:34:32 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:34:32 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:34:32 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:34:32 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6a32beed, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@194775da, org.springframework.security.web.context.SecurityContextHolderFilter@1a8b8898, org.springframework.security.web.header.HeaderWriterFilter@5ebf47c3, org.springframework.security.web.authentication.logout.LogoutFilter@6a7ee5f5, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2e67ef84, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1be9056a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@613abdc9, org.springframework.security.web.session.SessionManagementFilter@38d394e7, org.springframework.security.web.access.ExceptionTranslationFilter@4e7fd162, org.springframework.security.web.access.intercept.AuthorizationFilter@5f5a1f71]
2025-06-16 11:34:32 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64abcf51, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f0ed018, org.springframework.security.web.context.SecurityContextHolderFilter@114bd8a7, org.springframework.security.web.header.HeaderWriterFilter@71b4b729, org.springframework.security.web.authentication.logout.LogoutFilter@60d76531, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@55b1156b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e8fd0b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3d271b2, org.springframework.security.web.session.SessionManagementFilter@4f8c2b81, org.springframework.security.web.access.ExceptionTranslationFilter@76b65114, org.springframework.security.web.access.intercept.AuthorizationFilter@7b569c11]
2025-06-16 11:34:32 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:34:32 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:34:32 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 70 ms
2025-06-16 11:34:32 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:34:32 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:34:32 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:34:32 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:34:33 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:34:33 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:34:33 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:34:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:34:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:34:33 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:34:33 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:34:33 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:34:33 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:34:33 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:34:33 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:34:33 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:34:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:34:33 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:34:33 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:34:33 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:34:33 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:34:33 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:35:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 75996 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:35:33 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:35:33 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:35:36 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:35:39 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:35:39 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:35:39 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:35:39 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:35:39 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:35:39 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.621 seconds (process running for 7.306)
2025-06-16 11:35:39 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:35:39 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:35:39 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:35:39 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:35:39 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:35:39 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:35:39 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:35:39 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:35:40 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6685b5cc, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@457e7c5, org.springframework.security.web.context.SecurityContextHolderFilter@7e19dc82, org.springframework.security.web.header.HeaderWriterFilter@57e78e15, org.springframework.security.web.authentication.logout.LogoutFilter@1e8fd0b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2a4817a9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@49cf71ab, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7192a77e, org.springframework.security.web.session.SessionManagementFilter@581323d6, org.springframework.security.web.access.ExceptionTranslationFilter@677521, org.springframework.security.web.access.intercept.AuthorizationFilter@6122a8d5]
2025-06-16 11:35:40 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f388f1c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8b71391, org.springframework.security.web.context.SecurityContextHolderFilter@77807d12, org.springframework.security.web.header.HeaderWriterFilter@1c1050c1, org.springframework.security.web.authentication.logout.LogoutFilter@40e4f183, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@60ea6f69, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7e62bded, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49cefd81, org.springframework.security.web.session.SessionManagementFilter@7ed680d2, org.springframework.security.web.access.ExceptionTranslationFilter@2276b16a, org.springframework.security.web.access.intercept.AuthorizationFilter@18a00991]
2025-06-16 11:35:40 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:35:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:35:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 69 ms
2025-06-16 11:35:40 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:35:40 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:35:40 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:35:40 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:35:40 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Loading user details for: testadmin
2025-06-16 11:35:40 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Successfully loaded user details for: testadmin, Status: ACTIVE
2025-06-16 11:35:40 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Failed to authenticate since password does not match stored value
2025-06-16 11:35:40 [main] WARN  c.f.a.a.s.AuthenticationService - Authentication failed for user: testadmin
2025-06-16 11:35:40 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: testadmin, Error: Invalid username or password
2025-06-16 11:35:40 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:35:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:35:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:35:40 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:35:40 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:35:40 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:35:40 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:35:40 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:35:40 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:35:40 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:35:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:35:40 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:35:40 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/mfa/verify
2025-06-16 11:35:40 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/mfa/verify
2025-06-16 11:35:40 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:35:40 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:35:40 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:35:40 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:38:09 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 76440 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:38:09 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:38:09 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:38:12 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:38:15 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:38:15 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:38:15 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:38:16 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:38:16 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:38:16 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.81 seconds (process running for 7.305)
2025-06-16 11:38:16 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:38:16 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:38:16 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:38:16 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:38:16 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:38:16 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:38:16 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:38:16 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:38:16 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@641ca31, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3d137cf3, org.springframework.security.web.context.SecurityContextHolderFilter@2a4817a9, org.springframework.security.web.header.HeaderWriterFilter@1928b5e3, org.springframework.security.web.authentication.logout.LogoutFilter@7b569c11, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23d0c264, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@129003e8, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@595e9578, org.springframework.security.web.session.SessionManagementFilter@42b8af3a, org.springframework.security.web.access.ExceptionTranslationFilter@545ce96e, org.springframework.security.web.access.intercept.AuthorizationFilter@6685b5cc]
2025-06-16 11:38:16 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7ad1acec, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4a4a03bc, org.springframework.security.web.context.SecurityContextHolderFilter@40e4f183, org.springframework.security.web.header.HeaderWriterFilter@7e62bded, org.springframework.security.web.authentication.logout.LogoutFilter@8b71391, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@73c65fd1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@18a00991, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7456dd81, org.springframework.security.web.session.SessionManagementFilter@34f862e3, org.springframework.security.web.access.ExceptionTranslationFilter@60ea6f69, org.springframework.security.web.access.intercept.AuthorizationFilter@51ba99a8]
2025-06-16 11:38:16 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:38:16 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:38:16 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 70 ms
2025-06-16 11:38:16 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:38:16 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:38:16 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:38:16 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:38:16 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:38:16 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:38:16 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:38:17 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Loading user details for: testadmin
2025-06-16 11:38:17 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Successfully loaded user details for: testadmin, Status: ACTIVE
2025-06-16 11:38:17 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-16 11:38:17 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:38:17 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "ADMIN_USER_ALLOWED_IPS" not found; SQL statement:
select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=? [42102-224]
2025-06-16 11:38:17 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Unable to serialize claims object to json: Unable to serialize object: could not prepare statement [Table "ADMIN_USER_ALLOWED_IPS" not found; SQL statement:
select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=? [42102-224]] [select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=?] (through reference chain: io.jsonwebtoken.impl.DefaultClaims["allowedIps"])
2025-06-16 11:38:17 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:38:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:38:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 5 ms
2025-06-16 11:38:17 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:38:17 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:38:17 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:38:17 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:38:17 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:38:17 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:38:17 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:38:17 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:38:17 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:38:17 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:38:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:38:17 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:38:17 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/mfa/verify
2025-06-16 11:38:17 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/mfa/verify
2025-06-16 11:38:17 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:38:17 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:38:17 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:38:17 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:39:14 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 77328 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:39:14 [main] DEBUG c.f.a.c.EmailIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:39:14 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:39:15 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 77331 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:39:15 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:39:15 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:39:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:39:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:39:22 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:39:22 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:39:22 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:39:23 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:39:23 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:39:23 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:39:23 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:39:23 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:39:23 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 9.093 seconds (process running for 9.866)
2025-06-16 11:39:23 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:39:23 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:23 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:39:23 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:39:23 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:39:23 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:23 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:39:23 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:39:23 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:39:24 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:39:24 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:39:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 77328 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:39:24 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:39:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:39:24 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:39:24 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 9.23 seconds (process running for 9.838)
2025-06-16 11:39:24 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:39:24 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:24 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:39:24 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:39:24 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:39:24 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:24 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:39:24 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:39:25 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:39:25 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6122a8d5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4c85d6b7, org.springframework.security.web.context.SecurityContextHolderFilter@71e9be99, org.springframework.security.web.header.HeaderWriterFilter@6f2957d7, org.springframework.security.web.authentication.logout.LogoutFilter@71b4b729, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7e19dc82, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1a0525a7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6272e851, org.springframework.security.web.session.SessionManagementFilter@4df05464, org.springframework.security.web.access.ExceptionTranslationFilter@2f7a7da7, org.springframework.security.web.access.intercept.AuthorizationFilter@640ea5a6]
2025-06-16 11:39:25 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@34f862e3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@40e4f183, org.springframework.security.web.context.SecurityContextHolderFilter@39f60527, org.springframework.security.web.header.HeaderWriterFilter@936fdd8, org.springframework.security.web.authentication.logout.LogoutFilter@77807d12, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2276b16a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1c1050c1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@73c65fd1, org.springframework.security.web.session.SessionManagementFilter@3c1bd7f6, org.springframework.security.web.access.ExceptionTranslationFilter@5419f05b, org.springframework.security.web.access.intercept.AuthorizationFilter@7e62bded]
2025-06-16 11:39:25 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 105 ms
2025-06-16 11:39:25 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:39:25 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:39:25 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:25 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:39:25 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Loading user details for: testadmin
2025-06-16 11:39:25 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Successfully loaded user details for: testadmin, Status: ACTIVE
2025-06-16 11:39:25 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-16 11:39:25 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:25 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "ADMIN_USER_ALLOWED_IPS" not found; SQL statement:
select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=? [42102-224]
2025-06-16 11:39:25 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Unable to serialize claims object to json: Unable to serialize object: could not prepare statement [Table "ADMIN_USER_ALLOWED_IPS" not found; SQL statement:
select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=? [42102-224]] [select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=?] (through reference chain: io.jsonwebtoken.impl.DefaultClaims["allowedIps"])
2025-06-16 11:39:25 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2025-06-16 11:39:25 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:39:25 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:39:25 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:25 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:39:25 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:39:25 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:39:25 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:25 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2025-06-16 11:39:25 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/mfa/verify
2025-06-16 11:39:25 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/mfa/verify
2025-06-16 11:39:25 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:39:25 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:39:25 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:39:25 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:39:26 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:39:26 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:39:26 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:39:26 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:39:27 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:39:27 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 2.861 seconds (process running for 13.323)
2025-06-16 11:39:27 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:39:27 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:27 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:39:27 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:39:27 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:39:27 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:27 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:39:27 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:39:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@24c7c71b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@498ef4f8, org.springframework.security.web.context.SecurityContextHolderFilter@37aff11f, org.springframework.security.web.header.HeaderWriterFilter@279f8503, org.springframework.security.web.authentication.logout.LogoutFilter@33bd78e1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74f0ba3e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@584ac18b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214c854c, org.springframework.security.web.session.SessionManagementFilter@3049c373, org.springframework.security.web.access.ExceptionTranslationFilter@2bcf4f9f, org.springframework.security.web.access.intercept.AuthorizationFilter@1acd05c7]
2025-06-16 11:39:27 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3d0f1079, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@36e79369, org.springframework.security.web.context.SecurityContextHolderFilter@5b144f61, org.springframework.security.web.header.HeaderWriterFilter@249badc3, org.springframework.security.web.authentication.logout.LogoutFilter@655dd7d6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d0e3ef7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@54026b20, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4ac3996d, org.springframework.security.web.session.SessionManagementFilter@7527b4d5, org.springframework.security.web.access.ExceptionTranslationFilter@adf8662, org.springframework.security.web.access.intercept.AuthorizationFilter@7e648368]
2025-06-16 11:39:27 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 66 ms
2025-06-16 11:39:27 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:39:27 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:39:27 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:39:27 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Loading user details for: testadmin
2025-06-16 11:39:27 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Successfully loaded user details for: testadmin, Status: ACTIVE
2025-06-16 11:39:27 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-16 11:39:27 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:39:27 [main] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "ADMIN_USER_ALLOWED_IPS" not found; SQL statement:
select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=? [42102-224]
2025-06-16 11:39:27 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Unable to serialize claims object to json: Unable to serialize object: could not prepare statement [Table "ADMIN_USER_ALLOWED_IPS" not found; SQL statement:
select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=? [42102-224]] [select aia1_0.admin_user_id,aia1_0.ip_address from admin_user_allowed_ips aia1_0 where aia1_0.admin_user_id=?] (through reference chain: io.jsonwebtoken.impl.DefaultClaims["allowedIps"])
2025-06-16 11:39:27 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:39:27 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:39:27 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:39:27 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:39:27 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:39:27 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:39:27 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:39:27 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/mfa/verify
2025-06-16 11:39:27 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/mfa/verify
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:39:27 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:39:27 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:39:27 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:27 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Invalid username or password
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:39:27 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during MFA verification: Invalid MFA code
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:39:27 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:27 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:39:28 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:39:28 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] ]
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:28 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:39:28 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:39:29 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:39:29 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:39:29 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 77328 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:39:29 [main] DEBUG c.f.a.c.d.r.ClientDocumentRepositoryTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:39:29 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:39:29 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:39:29 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:39:29 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.642 seconds (process running for 15.895)
2025-06-16 11:39:30 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:39:30 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 77328 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:39:30 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:39:30 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 5597d72f-0d79-4014-a54a-4ff1df182e2c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:39:30 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3c4ff4c1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@ffdf376, org.springframework.security.web.context.SecurityContextHolderFilter@edba613, org.springframework.security.web.header.HeaderWriterFilter@5753aa96, org.springframework.web.filter.CorsFilter@58978292, org.springframework.security.web.csrf.CsrfFilter@13aabe60, org.springframework.security.web.authentication.logout.LogoutFilter@535345f1, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@783c6882, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@2fabaf51, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@2a07c9e2, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@537432d0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@48444016, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6566ae71, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@69adc99f, org.springframework.security.web.access.ExceptionTranslationFilter@770b4097, org.springframework.security.web.access.intercept.AuthorizationFilter@ef162fe]
2025-06-16 11:39:30 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:39:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:39:30 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.391 seconds (process running for 16.88)
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3d4ebea9]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@76766d41]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3586f293]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@aefbe2d]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@d723495]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:39:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@ec75c3d]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@750941bc]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@416b02e2]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6a90d2a0]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7d7b86c6]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:39:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@297cb415]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@751bd241]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4be50474]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:39:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@52cce648]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@67f2320d]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@6941ab1b and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:39:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@546f1a32]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:39:30 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@16d67578]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5265bfb2, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5265bfb2, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5265bfb2, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5265bfb2, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@c2a9821
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@7ea14f56
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7a1a9b8]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:39:30 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:39:30 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:39:30 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:39:30 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:40:10 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 77553 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:40:10 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:40:10 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:40:13 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
2025-06-16 11:40:13 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 96 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 106 common frames omitted
2025-06-16 11:40:13 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@35bcf3a6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@427946b9 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@fe58644 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@479cbee5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@12299890, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@ac15384f, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6986852, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1ef6d34c, org.springframework.boot.test.context.SpringBootTestAnnotation@1909402e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 73 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 96 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 106 common frames omitted
2025-06-16 11:40:13 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@477dc93]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@427946b9 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@fe58644 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@479cbee5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@12299890, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@ac15384f, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6986852, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1ef6d34c, org.springframework.boot.test.context.SpringBootTestAnnotation@1909402e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 11:40:13 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@5cb654e3]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@427946b9 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@fe58644 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@479cbee5, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@12299890, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@ac15384f, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@6986852, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@1ef6d34c, org.springframework.boot.test.context.SpringBootTestAnnotation@1909402e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
2025-06-16 11:41:51 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 77952 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:41:51 [main] DEBUG c.f.a.c.EmailIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:41:51 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:41:54 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
2025-06-16 11:41:54 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 98 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 108 common frames omitted
2025-06-16 11:41:54 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener] to prepare test instance [com.finance.admin.certificate.EmailIntegrationTest@2ab4c4e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@5118c7fb testClass = com.finance.admin.certificate.EmailIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["spring.mail.enabled=false", "app.email.enabled=false", "app.certificate.email.enabled=false", "org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true", "server.port=0"], contextCustomizers = [[ImportsContextCustomizer@792b0cad key = [com.finance.admin.config.TestConfig]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1608bcbd, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4426bff1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@4948b2b4, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@41709512, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@2ea6e30c, org.springframework.boot.test.context.SpringBootTestAnnotation@187b94f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.postProcessFields(MockitoTestExecutionListener.java:122)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.injectFields(MockitoTestExecutionListener.java:106)
	at org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener.prepareTestInstance(MockitoTestExecutionListener.java:63)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85)
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47)
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148)
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122)
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385)
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162)
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507)
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
	... 74 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282)
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254)
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54)
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76)
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782)
	... 98 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91)
	at org.h2.command.CommandContainer.update(CommandContainer.java:169)
	at org.h2.command.Command.executeUpdate(Command.java:256)
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262)
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231)
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261)
	... 108 common frames omitted
2025-06-16 11:41:54 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:41:54 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:41:54 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 77952 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:41:54 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:41:54 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:41:55 [main] WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
2025-06-16 11:41:55 [main] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 106 common frames omitted
2025-06-16 11:41:55 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@752daa1f]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2227fa03 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@7ea7fed5 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1608bcbd, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4426bff1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@45420e1a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@41709512, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@2ea6e30c, org.springframework.boot.test.context.SpringBootTestAnnotation@750ea0e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1786) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:312) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1231) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:949) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:334) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.1.4.jar:6.1.4]
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1454) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:553) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.2.3.jar:3.2.3]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152) ~[spring-test-6.1.4.jar:6.1.4]
	... 73 common frames omitted
Caused by: org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.boot.jdbc.init.DataSourceScriptDatabaseInitializer.runScripts(DataSourceScriptDatabaseInitializer.java:87) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.runScripts(AbstractScriptDatabaseInitializer.java:146) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applyScripts(AbstractScriptDatabaseInitializer.java:108) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.applySchemaScripts(AbstractScriptDatabaseInitializer.java:98) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.initializeDatabase(AbstractScriptDatabaseInitializer.java:76) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.boot.sql.init.AbstractScriptDatabaseInitializer.afterPropertiesSet(AbstractScriptDatabaseInitializer.java:66) ~[spring-boot-3.2.3.jar:3.2.3]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1833) ~[spring-beans-6.1.4.jar:6.1.4]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1782) ~[spring-beans-6.1.4.jar:6.1.4]
	... 96 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 106 common frames omitted
2025-06-16 11:41:55 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@1bff70a6]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2227fa03 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@7ea7fed5 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1608bcbd, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4426bff1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@45420e1a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@41709512, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@2ea6e30c, org.springframework.boot.test.context.SpringBootTestAnnotation@750ea0e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 11:41:55 [main] WARN  o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [com.finance.admin.auth.AuthenticationIntegrationTest@3d8bf514]
java.lang.IllegalStateException: ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [WebMergedContextConfiguration@2227fa03 testClass = com.finance.admin.auth.AuthenticationIntegrationTest, locations = [], classes = [com.finance.admin.AdminManagementApplication], contextInitializerClasses = [], activeProfiles = ["test"], propertySourceDescriptors = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@7ea7fed5 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, com.finance.admin.config.TestConfig, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@1608bcbd, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4426bff1, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@45420e1a, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@41709512, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@2ea6e30c, org.springframework.boot.test.context.SpringBootTestAnnotation@750ea0e], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:145) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:260) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:383) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:378) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:290) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:279) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:106) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:41:55 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Invalid username or password
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:41:55 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during MFA verification: Invalid MFA code
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:41:55 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:55 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] ]
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:41:56 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:41:56 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:41:56 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:41:56 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:41:56 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 77952 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:41:56 [main] DEBUG c.f.a.c.d.r.ClientDocumentRepositoryTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:41:56 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:41:57 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:41:57 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:41:59 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 2.723 seconds (process running for 8.826)
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByIdAndClientId_WithWrongClient_ReturnsEmpty()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@50c2670a]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findMostAccessed_WithAccessCountData_ReturnsMostAccessedDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@68585f5c]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientIdAndDocumentTypeAndIsActiveTrue_WithValidType_ReturnsFilteredDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@51667a4d]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.searchByName_WithMatchingTerm_ReturnsMatchingDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@68f89520]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findWithFilters_WithMultipleFilters_ReturnsFilteredDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@51ba1ff0]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.countByClientIdAndIsActiveTrue_WithActiveDocuments_ReturnsCorrectCount()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@601382c7]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.existsByClientIdAndDocumentTypeAndIsActiveTrue_WithExistingType_ReturnsTrue()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@6f9f765a]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.searchDocuments_WithMatchingTermInTags_ReturnsMatchingDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@2599641a]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientIdAndUploadedByClientTrueAndIsActiveTrue_ReturnsClientUploadedDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@6b419852]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.searchDocuments_WithMatchingTermInDescription_ReturnsMatchingDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@2c278e35]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientIdAndUploadedByClientFalseAndIsActiveTrue_ReturnsSystemDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@49d4a334]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findExpired_WithExpiredDocuments_ReturnsExpiredDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@663e8537]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.getTotalFileSizeForClient_WithNoDocuments_ReturnsZero()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@385339e2]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findRecentUploads_WithRecentDocuments_ReturnsRecentDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@31e6654f]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.getTotalFileSizeForClient_WithDocuments_ReturnsCorrectTotalSize()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@2aa0c35c]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findWithFilters_WithNullFilters_ReturnsAllActiveDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@4895f96a]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientIdAndDocumentStatusAndIsActiveTrue_WithValidStatus_ReturnsFilteredDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@69c4b690]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientIdAndIsActiveTrue_WithValidClient_ReturnsActiveDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@4e1c97be]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findExpiringSoon_WithDocumentsExpiringSoon_ReturnsExpiringSoonDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@a9ef07e]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientIdAndDocumentCategoryAndIsActiveTrue_WithValidCategory_ReturnsFilteredDocuments()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@48c2293f]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByIdAndClientId_WithValidIds_ReturnsDocument()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@5860a308]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.findByClientId_WithPagination_ReturnsPagedResults()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@2f5caaf8]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'beforeTestMethod' callback on TestExecutionListener [org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener] for test method [void com.finance.admin.client.document.repository.ClientDocumentRepositoryTest.existsByClientIdAndDocumentTypeAndIsActiveTrue_WithNonExistingType_ReturnsFalse()] and test instance [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest@c609ac8]
org.springframework.jdbc.datasource.init.ScriptStatementFailedException: Failed to execute SQL script statement #15 of class path resource [test-schema.sql]: CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE )
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:282) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.populate(ResourceDatabasePopulator.java:254) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.DatabasePopulatorUtils.execute(DatabasePopulatorUtils.java:54) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.jdbc.datasource.init.ResourceDatabasePopulator.execute(ResourceDatabasePopulator.java:269) ~[spring-jdbc-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$9(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.lambda$executeWithoutResult$0(TransactionOperations.java:68) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.transaction.support.TransactionOperations.executeWithoutResult(TransactionOperations.java:67) ~[spring-tx-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:362) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.lambda$executeSqlScripts$4(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:275) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.executeSqlScripts(SqlScriptsTestExecutionListener.java:222) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener.beforeTestMethod(SqlScriptsTestExecutionListener.java:165) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:320) ~[spring-test-6.1.4.jar:6.1.4]
	at org.springframework.test.context.junit.jupiter.SpringExtension.beforeEach(SpringExtension.java:240) ~[spring-test-6.1.4.jar:6.1.4]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeEachCallbacks$2(TestMethodTestDescriptor.java:167) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeBeforeMethodsOrCallbacksUntilExceptionOccurs$6(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeMethodsOrCallbacksUntilExceptionOccurs(TestMethodTestDescriptor.java:203) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeBeforeEachCallbacks(TestMethodTestDescriptor.java:166) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:133) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:69) ~[junit-jupiter-engine-5.10.2.jar:5.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:198) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:169) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:93) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:58) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:141) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:57) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:103) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:85) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.junit.platform.launcher.core.DelegatingLauncher.execute(DelegatingLauncher.java:47) ~[junit-platform-launcher-1.10.2.jar:1.10.2]
	at org.apache.maven.surefire.junitplatform.LazyLauncher.execute(LazyLauncher.java:56) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.execute(JUnitPlatformProvider.java:184) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invokeAllTests(JUnitPlatformProvider.java:148) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.junitplatform.JUnitPlatformProvider.invoke(JUnitPlatformProvider.java:122) ~[surefire-junit-platform-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:385) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:162) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.run(ForkedBooter.java:507) ~[surefire-booter-3.1.2.jar:3.1.2]
	at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:495) ~[surefire-booter-3.1.2.jar:3.1.2]
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "ADMIN_USER_ALLOWED_IPS" already exists; SQL statement:
CREATE TABLE admin_user_allowed_ips ( admin_user_id VARCHAR(36) NOT NULL, ip_address VARCHAR(45), FOREIGN KEY (admin_user_id) REFERENCES admin_users(id) ON DELETE CASCADE ) [42101-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:223) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.message.DbException.get(DbException.java:199) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.ddl.CreateTable.update(CreateTable.java:91) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.CommandContainer.update(CommandContainer.java:169) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.command.Command.executeUpdate(Command.java:256) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.executeInternal(JdbcStatement.java:262) ~[h2-2.2.224.jar:2.2.224]
	at org.h2.jdbc.JdbcStatement.execute(JdbcStatement.java:231) ~[h2-2.2.224.jar:2.2.224]
	at org.springframework.jdbc.datasource.init.ScriptUtils.executeSqlScript(ScriptUtils.java:261) ~[spring-jdbc-6.1.4.jar:6.1.4]
	... 70 common frames omitted
2025-06-16 11:41:59 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:41:59 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:41:59 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 77952 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:41:59 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:41:59 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:42:00 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:42:00 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 66a91094-2cf0-4302-9fa5-ab00cecfa426

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:42:00 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@edcf410, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7a3a0b91, org.springframework.security.web.context.SecurityContextHolderFilter@c004a74, org.springframework.security.web.header.HeaderWriterFilter@6ad4b4c3, org.springframework.web.filter.CorsFilter@57915f64, org.springframework.security.web.csrf.CsrfFilter@49ec206c, org.springframework.security.web.authentication.logout.LogoutFilter@3dd652cf, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@98edcf4, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@3d5c9c06, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@67b9785, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@6ef34c26, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@599e923c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@52bd24f6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6f6e9f2e, org.springframework.security.web.access.ExceptionTranslationFilter@3b1ca962, org.springframework.security.web.access.intercept.AuthorizationFilter@2986e516]
2025-06-16 11:42:00 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:42:00 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:42:00 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.599 seconds (process running for 9.741)
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5c405438]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@60bf2533]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@116a0d9d]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3c889efd]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6baaf19e]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:42:00 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@64b4c7e7]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6d68451f]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6d36fd9]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2fc7bd9b]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@5980a050]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:42:00 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1ce13a2d]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3c2a247f]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@be57ae8]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:42:00 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@2345a7af]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1ab95fec]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@4a87c701 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:42:00 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@35bf8ab2]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:42:00 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6a7c63ed]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d704fe1, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d704fe1, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d704fe1, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d704fe1, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@5d3fb85c
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@1d1ef122
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6cd426cd]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:42:00 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:42:00 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:42:00 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:42:00 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:42:00 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:42:00 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:42:00 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:42:00 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:42:00 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:44:41 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 78441 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:44:41 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:44:41 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:44:44 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:44:47 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:44:47 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:44:47 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:44:47 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:44:48 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:44:48 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 6.63 seconds (process running for 7.133)
2025-06-16 11:44:48 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:44:48 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:44:48 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:44:48 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:44:48 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:44:48 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:44:48 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:44:48 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy260.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:44:48 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7bd40d23, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7ad45b4b, org.springframework.security.web.context.SecurityContextHolderFilter@18408bc2, org.springframework.security.web.header.HeaderWriterFilter@5155982b, org.springframework.security.web.authentication.logout.LogoutFilter@64c30a1e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@342af214, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5b8a67d0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49cf71ab, org.springframework.security.web.session.SessionManagementFilter@4f8f4845, org.springframework.security.web.access.ExceptionTranslationFilter@34011030, org.springframework.security.web.access.intercept.AuthorizationFilter@3f9dca01]
2025-06-16 11:44:48 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4d695d86, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2822d49a, org.springframework.security.web.context.SecurityContextHolderFilter@9133a23, org.springframework.security.web.header.HeaderWriterFilter@1f384329, org.springframework.security.web.authentication.logout.LogoutFilter@131ec60f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7b8385cf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@267fb09d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7884c3b4, org.springframework.security.web.session.SessionManagementFilter@3d730cb1, org.springframework.security.web.access.ExceptionTranslationFilter@60024c12, org.springframework.security.web.access.intercept.AuthorizationFilter@2f742911]
2025-06-16 11:44:48 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:44:48 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:44:48 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 68 ms
2025-06-16 11:44:48 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:44:48 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:44:48 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:44:48 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:44:48 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:44:48 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:44:48 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:44:48 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Loading user details for: testadmin
2025-06-16 11:44:48 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Successfully loaded user details for: testadmin, Status: ACTIVE
2025-06-16 11:44:48 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-16 11:44:48 [main] INFO  c.f.a.a.s.AuthenticationService - User successfully authenticated: testadmin
2025-06-16 11:44:48 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:44:49 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:44:49 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:44:49 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:44:49 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:44:49 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:44:49 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:44:49 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:44:49 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:44:49 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:44:49 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:44:49 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:44:49 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:44:49 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:44:49 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:44:49 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:44:49 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/mfa/verify
2025-06-16 11:44:49 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/mfa/verify
2025-06-16 11:44:49 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:44:49 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:44:49 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:44:49 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:45:12 [main] INFO  c.f.a.c.EmailIntegrationTest - Starting EmailIntegrationTest using Java 17.0.15 with PID 78560 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:45:12 [main] DEBUG c.f.a.c.EmailIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:45:12 [main] INFO  c.f.a.c.EmailIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:45:15 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:45:18 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:45:18 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:45:18 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:45:18 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:45:18 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:45:18 [main] INFO  c.f.a.c.EmailIntegrationTest - Started EmailIntegrationTest in 6.099 seconds (process running for 6.653)
2025-06-16 11:45:18 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:45:18 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:45:18 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:45:18 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:45:18 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:45:18 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:45:18 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:45:18 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:45:19 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.auth.AuthenticationIntegrationTest]: AuthenticationIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:45:19 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.auth.AuthenticationIntegrationTest
2025-06-16 11:45:19 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Starting AuthenticationIntegrationTest using Java 17.0.15 with PID 78560 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:45:19 [main] DEBUG c.f.a.a.AuthenticationIntegrationTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:45:19 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - The following 1 profile is active: "test"
2025-06-16 11:45:19 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:45:20 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:45:20 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6379
2025-06-16 11:45:20 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6379
2025-06-16 11:45:20 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:45:20 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:45:20 [main] INFO  c.f.a.a.AuthenticationIntegrationTest - Started AuthenticationIntegrationTest in 1.689 seconds (process running for 8.704)
2025-06-16 11:45:20 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:45:20 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:45:20 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
2025-06-16 11:45:20 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']; SQL [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.findScheduledNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processScheduledNotifications(ClientNotificationService.java:263)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processScheduledNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]] [/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareQueryStatement(StatementPreparerImpl.java:155)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.lambda$list$0(JdbcSelectExecutor.java:85)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.executeQuery(DeferredResultSetAccess.java:231)
	at org.hibernate.sql.results.jdbc.internal.DeferredResultSetAccess.getResultSet(DeferredResultSetAccess.java:167)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.advanceNext(JdbcValuesResultSetImpl.java:218)
	at org.hibernate.sql.results.jdbc.internal.JdbcValuesResultSetImpl.processNext(JdbcValuesResultSetImpl.java:98)
	at org.hibernate.sql.results.jdbc.internal.AbstractJdbcValues.next(AbstractJdbcValues.java:19)
	at org.hibernate.sql.results.internal.RowProcessingStateStandardImpl.next(RowProcessingStateStandardImpl.java:66)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:202)
	at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:209)
	at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:83)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:76)
	at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:65)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.lambda$new$2(ConcreteSqmSelectQueryPlan.java:137)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.withCacheableSqmInterpretation(ConcreteSqmSelectQueryPlan.java:362)
	at org.hibernate.query.sqm.internal.ConcreteSqmSelectQueryPlan.performList(ConcreteSqmSelectQueryPlan.java:303)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doList(QuerySqmImpl.java:509)
	at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:427)
	at org.hibernate.query.Query.getResultList(Query.java:120)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:129)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* SELECT n FROM ClientNotification n WHERE n.scheduledAt <= :now AND n.deliveryStatus = 'PENDING' */ select cn1_0.id,cn1_0.category,cn1_0.client_id,cn1_0.created_at,cn1_0.created_by,cn1_0.delivered_at,cn1_0.delivery_method,cn1_0.delivery_status,cn1_0.expires_at,cn1_0.is_read,cn1_0.message,cn1_0.metadata,cn1_0.notification_type,cn1_0.priority_level,cn1_0.read_at,cn1_0.scheduled_at,cn1_0.title,cn1_0.updated_at,cn1_0.updated_by,cn1_0.version from client_notifications cn1_0 where cn1_0.scheduled_at<=? and cn1_0.delivery_status='PENDING' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTablePrimary(Parser.java:1788)
	at org.h2.command.Parser.readTableReference(Parser.java:2268)
	at org.h2.command.Parser.parseSelectFromPart(Parser.java:2718)
	at org.h2.command.Parser.parseSelect(Parser.java:2824)
	at org.h2.command.Parser.parseQueryPrimary(Parser.java:2708)
	at org.h2.command.Parser.parseQueryTerm(Parser.java:2564)
	at org.h2.command.Parser.parseQueryExpressionBody(Parser.java:2543)
	at org.h2.command.Parser.parseQueryExpressionBodyAndEndOfQuery(Parser.java:2536)
	at org.h2.command.Parser.parseQueryExpression(Parser.java:2529)
	at org.h2.command.Parser.parseQuery(Parser.java:2498)
	at org.h2.command.Parser.parsePrepared(Parser.java:627)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$5.doPrepare(StatementPreparerImpl.java:153)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 74 common frames omitted
2025-06-16 11:45:20 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:45:20 [scheduling-1] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 42102, SQLState: 42S02
2025-06-16 11:45:20 [scheduling-1] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
2025-06-16 11:45:20 [scheduling-1] ERROR o.s.s.s.TaskUtils$LoggingErrorHandler - Unexpected error occurred in scheduled task
org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']; SQL [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:277)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:241)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
	at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:335)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:220)
	at jdk.proxy2/jdk.proxy2.$Proxy268.markExpiredNotifications(Unknown Source)
	at com.finance.admin.client.notification.service.ClientNotificationService.processExpiredNotifications(ClientNotificationService.java:281)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:351)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:765)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:717)
	at com.finance.admin.client.notification.service.ClientNotificationService$$SpringCGLIB$$0.processExpiredNotifications(<generated>)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:569)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.runInternal(ScheduledMethodRunnable.java:130)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.lambda$run$2(ScheduledMethodRunnable.java:124)
	at io.micrometer.observation.Observation.observe(Observation.java:499)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:124)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
	at java.base/java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.Thread.run(Thread.java:840)
Caused by: org.hibernate.exception.SQLGrammarException: could not prepare statement [Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]] [/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED']
	at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:66)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:194)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:79)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.lambda$executeUpdate$0(SimpleUpdateQueryPlan.java:95)
	at org.hibernate.sql.exec.internal.StandardJdbcMutationExecutor.execute(StandardJdbcMutationExecutor.java:64)
	at org.hibernate.query.sqm.internal.SimpleUpdateQueryPlan.executeUpdate(SimpleUpdateQueryPlan.java:89)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.doExecuteUpdate(QuerySqmImpl.java:705)
	at org.hibernate.query.sqm.internal.QuerySqmImpl.executeUpdate(QuerySqmImpl.java:675)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:266)
	at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:92)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:149)
	at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:137)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:170)
	at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:158)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:70)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:385)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	... 38 common frames omitted
Caused by: org.h2.jdbc.JdbcSQLSyntaxErrorException: Table "CLIENT_NOTIFICATIONS" not found; SQL statement:
/* UPDATE ClientNotification n SET n.deliveryStatus = 'EXPIRED' WHERE n.expiresAt <= :now AND n.deliveryStatus != 'EXPIRED' */ update client_notifications set delivery_status='EXPIRED' where expires_at<=? and delivery_status<>'EXPIRED' [42102-224]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:514)
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:489)
	at org.h2.message.DbException.get(DbException.java:223)
	at org.h2.message.DbException.get(DbException.java:199)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8064)
	at org.h2.command.Parser.getTableOrViewNotFoundDbException(Parser.java:8035)
	at org.h2.command.Parser.readTableOrView(Parser.java:8024)
	at org.h2.command.Parser.readTableOrView(Parser.java:7990)
	at org.h2.command.Parser.readSimpleTableFilter(Parser.java:1094)
	at org.h2.command.Parser.parseUpdate(Parser.java:1018)
	at org.h2.command.Parser.parsePrepared(Parser.java:765)
	at org.h2.command.Parser.parse(Parser.java:592)
	at org.h2.command.Parser.parse(Parser.java:564)
	at org.h2.command.Parser.prepareCommand(Parser.java:483)
	at org.h2.engine.SessionLocal.prepareLocal(SessionLocal.java:639)
	at org.h2.engine.SessionLocal.prepareCommand(SessionLocal.java:559)
	at org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1166)
	at org.h2.jdbc.JdbcPreparedStatement.<init>(JdbcPreparedStatement.java:93)
	at org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:316)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:94)
	at org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:183)
	... 60 common frames omitted
2025-06-16 11:45:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@cf01828, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7f6da9a6, org.springframework.security.web.context.SecurityContextHolderFilter@7ef6a00e, org.springframework.security.web.header.HeaderWriterFilter@498c9221, org.springframework.security.web.authentication.logout.LogoutFilter@a84a492, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5987ecc, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ed7d7ff, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5741c2e9, org.springframework.security.web.session.SessionManagementFilter@151d762e, org.springframework.security.web.access.ExceptionTranslationFilter@7d5485c2, org.springframework.security.web.access.intercept.AuthorizationFilter@5c4b489b]
2025-06-16 11:45:21 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2359d5e0, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1a54b2e, org.springframework.security.web.context.SecurityContextHolderFilter@288dd963, org.springframework.security.web.header.HeaderWriterFilter@4ab919cb, org.springframework.security.web.authentication.logout.LogoutFilter@68b94ce1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@272adb35, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25dfe95a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4654acfb, org.springframework.security.web.session.SessionManagementFilter@6f5c863b, org.springframework.security.web.access.ExceptionTranslationFilter@10d3ff78, org.springframework.security.web.access.intercept.AuthorizationFilter@43f46ef4]
2025-06-16 11:45:21 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 54 ms
2025-06-16 11:45:21 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:45:21 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:45:21 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: testadmin
2025-06-16 11:45:21 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Loading user details for: testadmin
2025-06-16 11:45:21 [main] DEBUG c.f.a.a.s.AdminUserDetailsService - Successfully loaded user details for: testadmin, Status: ACTIVE
2025-06-16 11:45:21 [main] DEBUG o.s.s.a.d.DaoAuthenticationProvider - Authenticated user
2025-06-16 11:45:21 [main] INFO  c.f.a.a.s.AuthenticationService - User successfully authenticated: testadmin
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:45:21 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:45:21 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-06-16 11:45:21 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:45:21 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: null
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.a.s.AuthenticationService - Authentication attempt for user: invalid
2025-06-16 11:45:21 [main] WARN  c.f.a.a.s.AuthenticationService - User not found: invalid
2025-06-16 11:45:21 [main] ERROR c.f.a.auth.controller.AuthController - Authentication failed for user: invalid, Error: Invalid username or password
2025-06-16 11:45:21 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:45:21 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/mfa/verify
2025-06-16 11:45:21 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/mfa/verify
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:45:21 [main] INFO  c.f.a.a.s.AuthenticationService - MFA verification attempt
2025-06-16 11:45:21 [main] WARN  c.f.a.a.s.AuthenticationService - Invalid MFA token
2025-06-16 11:45:21 [main] ERROR c.f.a.auth.controller.AuthController - MFA verification failed: Invalid or expired MFA token
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - MFA required for user: testadmin
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:45:21 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during login for user: testadmin, Error: Invalid username or password
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:45:21 [main] ERROR c.f.a.auth.controller.AuthController - Unexpected error during MFA verification: Invalid MFA code
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login attempt from IP: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - X-Forwarded-For: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Remote Address: 127.0.0.1
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Login successful for user: testadmin
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification attempt
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - MFA verification successful
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Logout attempt
2025-06-16 11:45:21 [main] INFO  c.f.a.auth.controller.AuthController - Logout successful
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.user.controller.UserController - Creating user with username: newuser
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:21 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-06-16 11:45:21 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting detailed active investments
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment summary
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment insights
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [1] in public org.springframework.http.ResponseEntity<com.finance.admin.client.investment.dto.InvestmentComparisonResponse> com.finance.admin.client.investment.controller.ClientInvestmentController.compareInvestments(org.springframework.security.core.Authentication,com.finance.admin.client.investment.dto.InvestmentComparisonRequest) with 2 errors: [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [NotEmpty.investmentComparisonRequest.investmentIds,NotEmpty.investmentIds,NotEmpty.java.util.List,NotEmpty]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds]]; default message [At least 2 investments must be selected for comparison]] [Field error in object 'investmentComparisonRequest' on field 'investmentIds': rejected value [[]]; codes [Size.investmentComparisonRequest.investmentIds,Size.investmentIds,Size.java.util.List,Size]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [investmentComparisonRequest.investmentIds,investmentIds]; arguments []; default message [investmentIds],5,2]; default message [Can compare between 2 to 5 investments at once]] ]
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting completed investments
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting performance tracking for investment 1 over 12 months
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 downloading report 1
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment performance metrics
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting available reports
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment history with analytics
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 using advanced filtering with criteria: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=null, minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 comparing investments: [1, 2]
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment alerts
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment charts data for 12 months
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting all investments
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 generating custom report for period 2025-05-16 to 2025-06-16
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 filtering investments with criteria: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting portfolio optimization
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment analytics
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting active investments
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting investment recommendations
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:22 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.c.ClientInvestmentController - Client 1 requesting details for investment 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting detailed active investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment insights for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 1 over 6 months
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Downloading report 1 for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment performance for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting available reports for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment history with analytics for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 999 and investment: 1 over 6 months
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Advanced filtering investments for client: 1 with filters: EnhancedInvestmentFilterRequest(startDate=null, endDate=null, investmentTypes=null, investmentStatuses=[ACTIVE], riskRatings=[MODERATE], minInitialAmount=5000, maxInitialAmount=15000, minCurrentValue=null, maxCurrentValue=null, minReturnPercentage=null, maxReturnPercentage=null, performanceRating=null, performanceCategories=null, minSharpeRatio=null, maxVolatility=null, maxDrawdown=null, minDaysHeld=null, maxDaysHeld=null, daysToMaturityMin=null, daysToMaturityMax=null, approachingMaturity=null, longTermInvestments=null, shortTermInvestments=null, investmentCategories=null, sectors=null, geographicRegions=null, outperformingBenchmark=null, underperformingExpectations=null, highVolatilityInvestments=null, correlatedInvestments=null, minPortfolioWeight=null, maxPortfolioWeight=null, maxTotalFees=null, maxManagementFees=null, maxPerformanceFees=null, liquidityLevel=null, liquidInvestmentsOnly=null, esgCompliant=null, sustainabilityRatings=null, customMetrics=null, sortBy=RETURN_PERCENTAGE, sortDirection=DESC, secondarySortBy=null, page=0, size=10, viewType=null, includeHistoricalData=null, includeProjections=null, includeBenchmarkComparison=null)
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 999 and investment: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment tracking for client: 1 and investment: 999 over 6 months
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[1, 2], primaryMetric=TOTAL_RETURN, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=true, includeBenchmarkComparison=true)
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment alerts for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment charts data for client: 1 for 12 months
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting all investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting completed investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment summary for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Generating custom report for client: 1 with request: ReportGenerationRequest(reportType=MONTHLY_STATEMENT, startDate=2025-05-16, endDate=2025-06-16, customReportName=null, includeCharts=true, includeDetailedBreakdown=true, fileFormat=null, investmentTypes=null, riskRatings=null, includeCompletedOnly=null, includeActiveOnly=null)
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Filtering investments for client: 1 with filters: InvestmentFilterRequest(startDate=2024-06-16, endDate=2025-06-16, timeRangePreset=null, investmentTypes=[MANAGED_FUNDS_MUTUAL], investmentCategories=null, investmentStatuses=[ACTIVE], returnTypes=[CAPITAL_GROWTH], riskRatings=null, minAmount=null, maxAmount=null, minReturnPercentage=null, maxReturnPercentage=null, maturityStartDate=null, maturityEndDate=null, includeMaturedInvestments=null, includeActiveOnly=null, sortBy=null, sortDirection=null, page=null, size=null)
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 999
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting portfolio optimization for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Comparing investments for client: 1 with request: InvestmentComparisonRequest(investmentIds=[999], primaryMetric=null, additionalMetrics=null, comparisonPeriod=null, includeHistoricalData=null, includeBenchmarkComparison=null)
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment analytics for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting active investments for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment recommendations for client: 1
2025-06-16 11:45:22 [main] INFO  c.f.a.c.i.s.ClientInvestmentService - Getting investment details for client: 1 and investment: 1
2025-06-16 11:45:22 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.repository.ClientDocumentRepositoryTest]: ClientDocumentRepositoryTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:45:22 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.repository.ClientDocumentRepositoryTest
2025-06-16 11:45:22 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Starting ClientDocumentRepositoryTest using Java 17.0.15 with PID 78560 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:45:22 [main] DEBUG c.f.a.c.d.r.ClientDocumentRepositoryTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:45:22 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - The following 1 profile is active: "test"
2025-06-16 11:45:22 [main] INFO  o.s.b.t.a.j.TestDatabaseAutoConfiguration$EmbeddedDataSourceBeanFactoryPostProcessor - Replacing 'dataSource' DataSource bean with primary embedded version
2025-06-16 11:45:22 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:45:23 [main] INFO  c.f.a.c.d.r.ClientDocumentRepositoryTest - Started ClientDocumentRepositoryTest in 0.764 seconds (process running for 11.021)
2025-06-16 11:45:23 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.finance.admin.client.document.controller.ClientDocumentControllerTest]: ClientDocumentControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-06-16 11:45:23 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.finance.admin.AdminManagementApplication for test class com.finance.admin.client.document.controller.ClientDocumentControllerTest
2025-06-16 11:45:23 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Starting ClientDocumentControllerTest using Java 17.0.15 with PID 78560 (started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:45:23 [main] DEBUG c.f.a.c.d.c.ClientDocumentControllerTest - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:45:23 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - The following 1 profile is active: "development"
2025-06-16 11:45:24 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:45:24 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f8f52c4a-00b2-432a-bfd3-24a21b4a6897

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-06-16 11:45:24 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@209754a4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28b49f8e, org.springframework.security.web.context.SecurityContextHolderFilter@399aee6c, org.springframework.security.web.header.HeaderWriterFilter@777f10f5, org.springframework.web.filter.CorsFilter@328717da, org.springframework.security.web.csrf.CsrfFilter@37c69f4d, org.springframework.security.web.authentication.logout.LogoutFilter@7130e576, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@371dbea9, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@6c0d869e, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@c2a9821, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@2a028221, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a2522e5, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63facaac, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1682df74, org.springframework.security.web.access.ExceptionTranslationFilter@13c959f4, org.springframework.security.web.access.intercept.AuthorizationFilter@2ca6a96d]
2025-06-16 11:45:24 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-06-16 11:45:24 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-06-16 11:45:24 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentControllerTest - Started ClientDocumentControllerTest in 0.475 seconds (process running for 12.174)
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@4947aaca]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: document
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3ceaaa29]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@294ec435]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 30 days
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@363ab214]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@c85426a]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.uploadDocument(jakarta.servlet.http.HttpServletRequest,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Uploading document for client: 0
2025-06-16 11:45:24 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal argument: No enum constant com.finance.admin.client.document.model.ClientDocument.DocumentType.INVALID_TYPE
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@3e96143f]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 1 for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@74f72846]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/history
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/history
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentHistory(jakarta.servlet.http.HttpServletRequest,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document history for client: 1 for 7 days
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@59dcdd70]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.csrf.CsrfFilter - Invalid CSRF token found for http://localhost/api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.AccessDeniedHandlerImpl - Responding with 403 status code
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@ec75c3d]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting documents for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@367426a]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:45:24 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Illegal state: System documents cannot be deleted
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@7d7b86c6]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/search
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/search
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.searchDocuments(jakarta.servlet.http.HttpServletRequest,java.lang.String,java.lang.Integer,java.lang.Integer); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Searching documents for client: 1 with term: test
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@6525c68a]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing DELETE /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured DELETE /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.deleteDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Deleting document 1 for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@55ba688a]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/999
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/999
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentById(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document 999 for client: 1
2025-06-16 11:45:24 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Resource not found: Document not found
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@1dc277f4]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/categories
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/categories
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getDocumentCategories(jakarta.servlet.http.HttpServletRequest); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Getting document categories for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]] to HttpSession [org.springframework.mock.web.MockHttpSession@751bd241]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Failed to authorize ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.getClientDocuments(jakarta.servlet.http.HttpServletRequest,com.finance.admin.client.document.model.ClientDocument$DocumentType,com.finance.admin.client.document.model.ClientDocument$DocumentCategory,com.finance.admin.client.document.model.ClientDocument$DocumentStatus,java.lang.Boolean,java.lang.String,java.lang.Integer,java.lang.Integer,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController] with authorization manager org.springframework.security.config.annotation.method.configuration.DeferringObservationAuthorizationManager@299b028 and decision ExpressionAuthorizationDecision [granted=false, expressionAttribute=hasRole('CLIENT')]
2025-06-16 11:45:24 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Access denied: Access Denied
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@58a7b0ea]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/client/documents/upload
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/client/documents/upload
2025-06-16 11:45:24 [main] ERROR c.f.a.c.e.GlobalExceptionHandler - Missing required part: Required part 'file' is not present.
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@647c579b]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing PUT /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured PUT /api/client/documents/1
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.replaceDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long,org.springframework.web.multipart.MultipartFile,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String,java.lang.String); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Replacing document 1 for client: 1
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.s.HttpSessionRequestCache - Saved request http://localhost/api/client/documents?continue to session
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using And [Not [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d061ffc, matchingMediaTypes=[application/xhtml+xml, image/*, text/html, text/plain], useEquals=false, ignoredMediaTypes=[*/*]]]
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using Or [RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest], And [Not [MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d061ffc, matchingMediaTypes=[text/html], useEquals=false, ignoredMediaTypes=[]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d061ffc, matchingMediaTypes=[application/atom+xml, application/x-www-form-urlencoded, application/json, application/octet-stream, application/xml, multipart/form-data, text/xml], useEquals=false, ignoredMediaTypes=[*/*]]], MediaTypeRequestMatcher [contentNegotiationStrategy=org.springframework.web.accept.ContentNegotiationManager@5d061ffc, matchingMediaTypes=[*/*], useEquals=true, ignoredMediaTypes=[]]]
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Match found! Executing org.springframework.security.web.authentication.DelegatingAuthenticationEntryPoint@71e59c24
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - Trying to match using RequestHeaderRequestMatcher [expectedHeaderName=X-Requested-With, expectedHeaderValue=XMLHttpRequest]
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.a.DelegatingAuthenticationEntryPoint - No match found. Using default entry point org.springframework.security.web.authentication.www.BasicAuthenticationEntryPoint@4c304218
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Created HttpSession as SecurityContext is non-default
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Stored SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]] to HttpSession [org.springframework.mock.web.MockHttpSession@12b7d634]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/client/documents/1/download
2025-06-16 11:45:24 [main] DEBUG o.s.s.w.c.HttpSessionSecurityContextRepository - Retrieved SecurityContextImpl [Authentication=UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=user, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, CredentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_CLIENT]], Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_CLIENT]]]
2025-06-16 11:45:24 [main] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/client/documents/1/download
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorizing method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] DEBUG o.s.s.a.m.AuthorizationManagerBeforeMethodInterceptor - Authorized method invocation ReflectiveMethodInvocation: public org.springframework.http.ResponseEntity com.finance.admin.client.document.controller.ClientDocumentController.downloadDocument(jakarta.servlet.http.HttpServletRequest,java.lang.Long); target is of class [com.finance.admin.client.document.controller.ClientDocumentController]
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.c.ClientDocumentController - Downloading document 1 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 999
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 1 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 1 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 1 with filters
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Downloading document 999 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 999 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for 30 days
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 999 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Deleting document 1 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 999
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting documents for client: 999 with filters
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Replacing document 1 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Uploading document for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Document uploaded successfully with ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document history for client: 1 for null days
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document 999 for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.d.s.ClientDocumentService - Getting document categories for client: 1
2025-06-16 11:45:24 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:45:24 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:45:24 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:45:24 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:45:24 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 999
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updated profile for client: John Michael Doe
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Getting profile for client ID: 1
2025-06-16 11:45:24 [main] DEBUG c.f.a.c.p.s.ClientProfileService - Getting KYC status for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Retrieved profile for client: John Michael Doe
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:45:24 [main] INFO  c.f.a.c.p.s.ClientProfileService - Updating profile for client ID: 1
2025-06-16 11:46:14 [main] INFO  c.f.admin.AdminManagementApplication - Starting AdminManagementApplication using Java 17.0.15 with PID 79084 (/Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend/target/classes started by hongyuanfan in /Users/hongyuanfan/Desktop/lifetech/LifeTechBackend/Backend)
2025-06-16 11:46:14 [main] DEBUG c.f.admin.AdminManagementApplication - Running with Spring Boot v3.2.3, Spring v6.1.4
2025-06-16 11:46:14 [main] INFO  c.f.admin.AdminManagementApplication - The following 1 profile is active: "development"
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 79 ms. Found 14 JPA repository interfaces.
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data MongoDB repositories in DEFAULT mode.
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.audit.repository.AuditLogRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.auth.repository.AdminUserRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.certificate.repository.CertificateRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.certificate.repository.CertificateTemplateRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.document.repository.ClientDocumentRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.notification.repository.ClientNotificationRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientLoginHistoryRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientMembershipRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientSessionRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.enquiry.repository.EnquiryRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.investment.repository.EntityRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.investment.repository.InvestmentRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data MongoDB - Could not safely identify store assignment for repository candidate interface com.finance.admin.user.repository.UserRepository; If you want this repository to be a MongoDB repository, consider annotating your entities with one of these annotations: org.springframework.data.mongodb.core.mapping.Document (preferred), or consider extending one of the following types with your repository: org.springframework.data.mongodb.repository.MongoRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 MongoDB repository interfaces.
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.audit.repository.AuditLogRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.auth.repository.AdminUserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.certificate.repository.CertificateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.certificate.repository.CertificateTemplateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.document.repository.ClientDocumentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.notification.repository.ClientNotificationRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientLoginHistoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientMembershipRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.client.repository.ClientSessionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.enquiry.repository.EnquiryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.investment.repository.EntityRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.investment.repository.InvestmentRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.finance.admin.user.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-06-16 11:46:15 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.datasource-org.springframework.boot.autoconfigure.jdbc.DataSourceProperties' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$PooledDataSourceConfiguration' of type [org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$PooledDataSourceConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'jdbcConnectionDetails' of type [org.springframework.boot.autoconfigure.jdbc.PropertiesJdbcConnectionDetails] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSource' of type [com.zaxxer.hikari.HikariDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.jpa-org.springframework.boot.autoconfigure.orm.jpa.JpaProperties' of type [org.springframework.boot.autoconfigure.orm.jpa.JpaProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.jpa.hibernate-org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties' of type [org.springframework.boot.autoconfigure.orm.jpa.HibernateProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.jdbc.metadata.DataSourcePoolMetadataProvidersConfiguration$HikariPoolDataSourceMetadataProviderConfiguration' of type [org.springframework.boot.autoconfigure.jdbc.metadata.DataSourcePoolMetadataProvidersConfiguration$HikariPoolDataSourceMetadataProviderConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'hikariPoolDataSourceMetadataProvider' of type [org.springframework.boot.autoconfigure.jdbc.metadata.DataSourcePoolMetadataProvidersConfiguration$HikariPoolDataSourceMetadataProviderConfiguration$$Lambda$675/0x0000007001568668] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration' of type [org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizationAutoConfiguration' of type [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizationAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionExecutionListeners' of type [org.springframework.boot.autoconfigure.transaction.ExecutionListenersTransactionManagerCustomizer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.transaction-org.springframework.boot.autoconfigure.transaction.TransactionProperties' of type [org.springframework.boot.autoconfigure.transaction.TransactionProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'platformTransactionManagerCustomizers' of type [org.springframework.boot.autoconfigure.transaction.TransactionManagerCustomizers] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.sql.init.DataSourceInitializationConfiguration' of type [org.springframework.boot.autoconfigure.sql.init.DataSourceInitializationConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.sql.init-org.springframework.boot.autoconfigure.sql.init.SqlInitializationProperties' of type [org.springframework.boot.autoconfigure.sql.init.SqlInitializationProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'dataSourceScriptDatabaseInitializer' of type [org.springframework.boot.autoconfigure.sql.init.SqlDataSourceScriptDatabaseInitializer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$DataSourceInitializerConfiguration' of type [org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$DataSourceInitializerConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'spring.batch-org.springframework.boot.autoconfigure.batch.BatchProperties' of type [org.springframework.boot.autoconfigure.batch.BatchProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-06-16 11:46:15 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2abedbbd
2025-06-16 11:46:15 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'batchDataSourceInitializer' of type [org.springframework.boot.autoconfigure.batch.BatchDataSourceScriptDatabaseInitializer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'jpaVendorAdapter' of type [org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'entityManagerFactoryBuilder' of type [org.springframework.boot.orm.jpa.EntityManagerFactoryBuilder] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'persistenceManagedTypes' of type [org.springframework.orm.jpa.persistenceunit.SimplePersistenceManagedTypes] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:15 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-06-16 11:46:15 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.4.4.Final
2025-06-16 11:46:15 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-06-16 11:46:15 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-06-16 11:46:15 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-06-16 11:46:16 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean '(inner bean)#3e170abe' of type [org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:16 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean '(inner bean)#3e170abe' of type [org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean$TargetBeanObjectFactory] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:16 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table admin_user_allowed_ips (
        admin_user_id uuid not null,
        ip_address varchar(45)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table admin_user_roles (
        admin_user_id uuid not null,
        role varchar(255) check (role in ('SUPER_ADMIN','SYSTEM_ADMIN','FINANCIAL_ADMIN','CUSTOMER_SERVICE_ADMIN','COMPLIANCE_OFFICER','ANALYST'))
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table admin_users (
        id uuid not null,
        created_at timestamp(6) not null,
        created_by varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        version bigint,
        email varchar(100) not null,
        failed_login_attempts integer not null,
        force_password_change boolean not null,
        last_login timestamp(6),
        last_password_change timestamp(6),
        locked_until timestamp(6),
        mfa_enabled boolean not null,
        mfa_secret varchar(255),
        password_expires_at timestamp(6),
        password varchar(255) not null,
        session_timeout_minutes integer,
        status varchar(20) not null check (status in ('ACTIVE','INACTIVE','SUSPENDED','LOCKED','EXPIRED','PENDING_ACTIVATION')),
        username varchar(50) not null,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table audit_logs (
        id uuid not null,
        created_at timestamp(6) not null,
        created_by varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        version bigint,
        action_type varchar(100) not null,
        end_time timestamp(6) not null,
        entity_id uuid,
        entity_type varchar(100) not null,
        error_message varchar(255),
        ip_address varchar(45),
        method_name varchar(100),
        new_values TEXT,
        old_values TEXT,
        parameters varchar(255),
        session_id varchar(255),
        start_time timestamp(6) not null,
        status varchar(20) not null,
        user_agent varchar(255),
        user_id uuid,
        user_type varchar(10) not null,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table certificate_templates (
        id bigserial not null,
        background_image_path varchar(500),
        company_logo_path varchar(500),
        created_at timestamp(6) not null,
        created_by uuid not null,
        is_active boolean,
        is_default boolean,
        primary_color varchar(7),
        secondary_color varchar(7),
        template_content TEXT not null,
        template_file_path varchar(500),
        template_format varchar(20),
        template_name varchar(255) not null,
        template_type varchar(50) not null check (template_type in ('SHARE_CERTIFICATE','INVESTMENT_CERTIFICATE','UNIT_CERTIFICATE','BOND_CERTIFICATE','EQUITY_CERTIFICATE','CUSTOM')),
        template_variables TEXT,
        updated_at timestamp(6),
        version integer,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table certificates (
        id bigserial not null,
        certificate_number varchar(50) not null,
        certificate_type varchar(50) not null check (certificate_type in ('SHARE_CERTIFICATE','INVESTMENT_CERTIFICATE','UNIT_CERTIFICATE','BOND_CERTIFICATE','EQUITY_CERTIFICATE')),
        created_at timestamp(6) not null,
        created_by uuid not null,
        digital_signature TEXT,
        expiry_date date,
        file_hash varchar(128),
        file_path varchar(500),
        file_size bigint,
        investment_amount numeric(15,2),
        issue_date date not null,
        number_of_shares numeric(15,4),
        share_price numeric(10,4),
        status varchar(20) check (status in ('ACTIVE','INACTIVE','EXPIRED','REVOKED','PENDING')),
        updated_at timestamp(6),
        updated_by uuid,
        version integer,
        client_id bigint not null,
        investment_id bigint not null,
        template_id bigint,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table client_documents (
        id bigserial not null,
        access_count integer,
        created_at timestamp(6),
        description varchar(1000),
        document_category varchar(255) not null check (document_category in ('LEGAL','COMPLIANCE','KYC','FINANCIAL','IDENTITY','TAX','INVESTMENT','REGULATORY','POLICY','PERSONAL')),
        document_name varchar(255) not null,
        document_status varchar(255) check (document_status in ('UPLOADED','UNDER_REVIEW','APPROVED','REJECTED','EXPIRED','REPLACED','ARCHIVED')),
        document_type varchar(255) not null check (document_type in ('INVESTMENT_AGREEMENT','TERMS_CONDITIONS','REGULATORY_DISCLOSURE','TAX_DOCUMENT','COMPANY_POLICY','PRODUCT_DISCLOSURE','KYC_DOCUMENT','BANK_STATEMENT','IDENTITY_VERIFICATION','ADDRESS_PROOF','TAX_FILE_NUMBER','BANK_ACCOUNT_UPDATE','OTHER')),
        expiry_date timestamp(6),
        file_path varchar(500) not null,
        file_size bigint,
        is_active boolean,
        last_accessed_date timestamp(6),
        mime_type varchar(100),
        tags varchar(500),
        updated_at timestamp(6),
        upload_date timestamp(6),
        uploaded_by_client boolean,
        version_number integer,
        client_id bigint not null,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table client_login_history (
        id bigserial not null,
        client_id bigint,
        failure_reason varchar(255),
        ip_address varchar(255),
        login_successful boolean,
        login_timestamp timestamp(6) not null,
        logout_timestamp timestamp(6),
        session_duration numeric(21,0),
        user_agent TEXT,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table client_membership (
        id bigserial not null,
        benefits_unlocked jsonb,
        client_id bigint not null,
        created_at timestamp(6),
        digital_card_issued boolean,
        joined_date date not null,
        membership_number varchar(50) not null,
        membership_status varchar(20),
        membership_tier varchar(20),
        points_balance integer,
        tier_upgrade_date date,
        updated_at timestamp(6),
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table client_notification_preferences (
        id uuid not null,
        created_at timestamp(6) not null,
        created_by varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        version bigint,
        client_id bigint not null,
        do_not_disturb_enabled boolean,
        do_not_disturb_end_time varchar(255),
        do_not_disturb_start_time varchar(255),
        general_email boolean,
        general_in_app boolean,
        general_push boolean,
        general_sms boolean,
        investment_email boolean,
        investment_in_app boolean,
        investment_push boolean,
        investment_sms boolean,
        kyc_email boolean,
        kyc_in_app boolean,
        kyc_push boolean,
        kyc_sms boolean,
        language varchar(255),
        report_email boolean,
        report_in_app boolean,
        report_push boolean,
        report_sms boolean,
        return_email boolean,
        return_in_app boolean,
        return_push boolean,
        return_sms boolean,
        security_email boolean,
        security_in_app boolean,
        security_push boolean,
        security_sms boolean,
        system_email boolean,
        system_in_app boolean,
        system_push boolean,
        system_sms boolean,
        timezone varchar(255),
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table client_notifications (
        id uuid not null,
        created_at timestamp(6) not null,
        created_by varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        version bigint,
        category varchar(255) not null check (category in ('WELCOME','BIRTHDAY','ANNOUNCEMENT','DOCUMENT_REQUEST','VERIFICATION_RESULT','STATUS_UPDATE','NEW_OPPORTUNITY','MATURITY','DISTRIBUTION','MONTHLY_REPORT','ANNUAL_STATEMENT','TAX_DOCUMENT','MAINTENANCE','SECURITY_ALERT')),
        client_id bigint not null,
        delivered_at timestamp(6),
        delivery_method varchar(255) check (delivery_method in ('IN_APP','EMAIL','SMS','PUSH','EMAIL_AND_PUSH','EMAIL_AND_SMS','PUSH_AND_EMAIL','ALL')),
        delivery_status varchar(255) check (delivery_status in ('PENDING','SENT','DELIVERED','READ','FAILED','EXPIRED','CANCELLED')),
        expires_at timestamp(6),
        is_read boolean,
        message TEXT not null,
        metadata jsonb,
        notification_type varchar(255) not null check (notification_type in ('GENERAL','KYC','INVESTMENT','RETURN','REPORT','SYSTEM','SECURITY')),
        priority_level varchar(255) check (priority_level in ('LOW','NORMAL','HIGH','URGENT','CRITICAL')),
        read_at timestamp(6),
        scheduled_at timestamp(6),
        title varchar(255) not null,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table client_sessions (
        id uuid not null,
        created_at timestamp(6) not null,
        created_by varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        version bigint,
        client_id bigint not null,
        device_fingerprint varchar(255),
        expires_at timestamp(6) not null,
        ip_address varchar(255),
        is_active boolean not null,
        last_accessed timestamp(6),
        remember_me_expires_at timestamp(6),
        remember_me_token varchar(255),
        session_token varchar(255) not null,
        user_agent TEXT,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table clients (
        id bigserial not null,
        address_city varchar(100),
        address_country varchar(100),
        address_postal_code varchar(20),
        address_state varchar(100),
        address_street varchar(255),
        bank_account_name varchar(255),
        bank_account_number_encrypted varchar(255),
        bank_bsb varchar(10),
        blockchain_identity_hash varchar(128),
        created_at timestamp(6) not null,
        created_by varchar(255),
        date_of_birth date,
        email_primary varchar(255) not null,
        email_secondary varchar(255),
        first_name varchar(100) not null,
        investment_target numeric(15,2),
        last_name varchar(100) not null,
        mailing_address_same boolean,
        mailing_city varchar(100),
        mailing_country varchar(100),
        mailing_postal_code varchar(20),
        mailing_state varchar(100),
        mailing_street varchar(255),
        membership_number varchar(20) not null,
        middle_name varchar(100),
        phone_primary varchar(20),
        phone_secondary varchar(20),
        risk_profile varchar(50),
        status varchar(20) check (status in ('ACTIVE','INACTIVE','PENDING','SUSPENDED')),
        tax_residency_status varchar(50),
        tfn_encrypted varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table enquiries (
        id bigserial not null,
        assigned_to uuid,
        category varchar(100),
        contact_email varchar(255),
        contact_name varchar(255),
        contact_phone varchar(20),
        created_at timestamp(6) not null,
        created_by uuid,
        description TEXT,
        due_date timestamp(6),
        enquiry_number varchar(20) not null,
        enquiry_type varchar(255) not null check (enquiry_type in ('GENERAL_INQUIRY','INVESTMENT_INQUIRY','ACCOUNT_SUPPORT','TECHNICAL_SUPPORT','COMPLAINT','FEEDBACK','PARTNERSHIP','MEDIA_INQUIRY','COMPLIANCE','OTHER')),
        internal_notes TEXT,
        priority varchar(255) check (priority in ('LOW','MEDIUM','HIGH','URGENT')),
        resolved_date timestamp(6),
        response TEXT,
        response_date timestamp(6),
        source varchar(50),
        status varchar(255) check (status in ('OPEN','IN_PROGRESS','PENDING_CLIENT','RESOLVED','CLOSED','ESCALATED')),
        subject varchar(255) not null,
        tags varchar(255),
        updated_at timestamp(6),
        updated_by uuid,
        client_id bigint,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table entities (
        id bigserial not null,
        abn varchar(11),
        acn varchar(9),
        contact_email varchar(255),
        contact_person varchar(255),
        contact_phone varchar(20),
        created_at timestamp(6) not null,
        created_by bigint,
        entity_name varchar(255) not null,
        entity_type varchar(255) not null check (entity_type in ('INDIVIDUAL','JOINT_ACCOUNT','COMPANY','FAMILY_TRUST','UNIT_TRUST','DISCRETIONARY_TRUST','SMSF','PARTNERSHIP','OTHER')),
        gst_registered boolean,
        registered_city varchar(100),
        registered_country varchar(100),
        registered_postal_code varchar(20),
        registered_state varchar(100),
        registered_street varchar(255),
        registration_date date,
        registration_number varchar(255),
        status varchar(255) check (status in ('ACTIVE','INACTIVE','PENDING','SUSPENDED')),
        tax_residency_status varchar(50),
        tfn_encrypted varchar(255),
        updated_at timestamp(6),
        updated_by bigint,
        client_id bigint not null,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table investments (
        id bigserial not null,
        actual_return_amount numeric(15,2),
        created_at timestamp(6) not null,
        created_by bigint,
        current_price_per_unit numeric(15,4),
        current_value numeric(15,2),
        description TEXT,
        expected_return_amount numeric(15,2),
        expected_return_rate numeric(5,2),
        initial_amount numeric(15,2) not null,
        investment_category varchar(255),
        investment_name varchar(255) not null,
        investment_objective TEXT,
        investment_type varchar(255) not null check (investment_type in ('PROPERTY_RESIDENTIAL','PROPERTY_COMMERCIAL','PROPERTY_INDUSTRIAL','EQUITY_LISTED_SHARES','EQUITY_PRIVATE','FIXED_INCOME_BONDS','FIXED_INCOME_TERM_DEPOSITS','FIXED_INCOME_GOVERNMENT','ALTERNATIVE_COMMODITIES','ALTERNATIVE_CRYPTOCURRENCY','ALTERNATIVE_COLLECTIBLES','MANAGED_FUNDS_MUTUAL','MANAGED_FUNDS_ETF','MANAGED_FUNDS_HEDGE','DIRECT_BUSINESS','DIRECT_STARTUPS')),
        management_fees numeric(10,2),
        maturity_date date,
        performance_fees numeric(10,2),
        purchase_date date not null,
        purchase_price_per_unit numeric(15,4),
        risk_rating varchar(255) check (risk_rating in ('CONSERVATIVE','MODERATE','AGGRESSIVE')),
        status varchar(255) check (status in ('PENDING','ACTIVE','MATURED','PARTIAL_EXIT','FULLY_EXITED','SUSPENDED','DEFAULTED')),
        transaction_fees numeric(10,2),
        units_purchased numeric(15,4),
        updated_at timestamp(6),
        updated_by bigint,
        client_id bigint not null,
        entity_id bigint,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create table users (
        id uuid not null,
        created_at timestamp(6) not null,
        created_by varchar(255),
        updated_at timestamp(6),
        updated_by varchar(255),
        version bigint,
        account_locked_at timestamp(6),
        date_of_birth timestamp(6),
        email varchar(100) not null,
        email_verified boolean,
        failed_login_attempts integer,
        first_name varchar(50),
        last_failed_login_at timestamp(6),
        last_login_at timestamp(6),
        last_login_ip varchar(255),
        last_name varchar(50),
        locale varchar(10),
        login_count bigint,
        password varchar(255) not null,
        password_changed_at timestamp(6),
        phone_number varchar(20),
        phone_verified boolean,
        profile_image_url varchar(255),
        status varchar(255) not null check (status in ('ACTIVE','SUSPENDED','BANNED','PENDING_VERIFICATION','DEACTIVATED','LOCKED')),
        status_change_reason varchar(500),
        status_changed_at timestamp(6),
        status_changed_by uuid,
        timezone varchar(10),
        username varchar(50) not null,
        primary key (id)
    )
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_admin_username 
       on admin_users (username)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_admin_email 
       on admin_users (email)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_admin_status 
       on admin_users (status)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists admin_users 
       drop constraint if exists UK_cp8822350s9vtyww7xdbgeuvu
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_cp8822350s9vtyww7xdbgeuvu" of relation "admin_users" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists admin_users 
       add constraint UK_cp8822350s9vtyww7xdbgeuvu unique (email)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists admin_users 
       drop constraint if exists UK_3fgxk4ewgaxgtgvqwb1jjudj6
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_3fgxk4ewgaxgtgvqwb1jjudj6" of relation "admin_users" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists admin_users 
       add constraint UK_3fgxk4ewgaxgtgvqwb1jjudj6 unique (username)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_audit_user_id 
       on audit_logs (user_id)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_audit_action_type 
       on audit_logs (action_type)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_audit_entity_type 
       on audit_logs (entity_type)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_audit_created_at 
       on audit_logs (created_at)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       drop constraint if exists UK_fipjgqr5997w3i89i4mfyng9f
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_fipjgqr5997w3i89i4mfyng9f" of relation "certificates" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       add constraint UK_fipjgqr5997w3i89i4mfyng9f unique (certificate_number)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_membership 
       drop constraint if exists UK_b22um3snc7eyi7cfp12t2qeou
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_b22um3snc7eyi7cfp12t2qeou" of relation "client_membership" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_membership 
       add constraint UK_b22um3snc7eyi7cfp12t2qeou unique (membership_number)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_notification_preferences 
       drop constraint if exists UK_g1ob3ulb9w8c6g4u8f9fnileh
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_g1ob3ulb9w8c6g4u8f9fnileh" of relation "client_notification_preferences" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_notification_preferences 
       add constraint UK_g1ob3ulb9w8c6g4u8f9fnileh unique (client_id)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_sessions 
       drop constraint if exists UK_clg6qoxxv5608dc451dgbyuf5
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_clg6qoxxv5608dc451dgbyuf5" of relation "client_sessions" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_sessions 
       add constraint UK_clg6qoxxv5608dc451dgbyuf5 unique (remember_me_token)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_sessions 
       drop constraint if exists UK_t4khl8m6wxmjvyc59i7vwymn0
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_t4khl8m6wxmjvyc59i7vwymn0" of relation "client_sessions" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_sessions 
       add constraint UK_t4khl8m6wxmjvyc59i7vwymn0 unique (session_token)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       drop constraint if exists UK_dpl3sg78a9pqij2c75dgctvr
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_dpl3sg78a9pqij2c75dgctvr" of relation "clients" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       add constraint UK_dpl3sg78a9pqij2c75dgctvr unique (email_primary)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       drop constraint if exists UK_fkoasmmbcyeiv908fq5chu4ta
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_fkoasmmbcyeiv908fq5chu4ta" of relation "clients" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists clients 
       add constraint UK_fkoasmmbcyeiv908fq5chu4ta unique (membership_number)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists enquiries 
       drop constraint if exists UK_s6b5yvplflq9dexihl3yf17i5
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_s6b5yvplflq9dexihl3yf17i5" of relation "enquiries" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists enquiries 
       add constraint UK_s6b5yvplflq9dexihl3yf17i5 unique (enquiry_number)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_user_email 
       on users (email)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_user_username 
       on users (username)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_user_status 
       on users (status)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_user_created_at 
       on users (created_at)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    create index idx_user_last_login 
       on users (last_login_at)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists UK_6dotkott2kjsp8vw4d0m25fb7
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_6dotkott2kjsp8vw4d0m25fb7" of relation "users" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint UK_6dotkott2kjsp8vw4d0m25fb7 unique (email)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       drop constraint if exists UK_r43af9ap4edm43mmtq01oddj6
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Warning Code: 0, SQLState: 00000
2025-06-16 11:46:16 [main] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - constraint "uk_r43af9ap4edm43mmtq01oddj6" of relation "users" does not exist, skipping
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists users 
       add constraint UK_r43af9ap4edm43mmtq01oddj6 unique (username)
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists admin_user_allowed_ips 
       add constraint FK6djpms049826iouqv8t4aun7w 
       foreign key (admin_user_id) 
       references admin_users
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists admin_user_roles 
       add constraint FK486l3h5kt03mw088cosejeud1 
       foreign key (admin_user_id) 
       references admin_users
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       add constraint FKlnwjsut7480baufv45j0i4bf3 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       add constraint FKmuei4qx2vt6qemjkrjqkd0r3b 
       foreign key (investment_id) 
       references investments
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists certificates 
       add constraint FK1qd9d9utbnnhhqff0e01nmgwl 
       foreign key (template_id) 
       references certificate_templates
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_documents 
       add constraint FK8w1vi21ia7d69btkpligpf3hw 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_login_history 
       add constraint FKj2f6d8l3leqrkylvad72hgpva 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists client_sessions 
       add constraint FKaivi0y78o2djgkrl9lg4f9xbs 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists enquiries 
       add constraint FK9r33qikmwbv07bnak6dmstqfv 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists entities 
       add constraint FKofse0g9fghwfrt42ko68175y1 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists investments 
       add constraint FKrst49wjxgj0suyv8ceesdv7w1 
       foreign key (client_id) 
       references clients
2025-06-16 11:46:16 [main] DEBUG org.hibernate.SQL - 
    alter table if exists investments 
       add constraint FKragfnufauta9wlljt2qpue0hq 
       foreign key (entity_id) 
       references entities
2025-06-16 11:46:16 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-06-16 11:46:16 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'entityManagerFactory' of type [org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:16 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'entityManagerFactory' of type [jdk.proxy2.$Proxy186] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:16 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'transactionManager' of type [org.springframework.orm.jpa.JpaTransactionManager] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). Is this bean getting eagerly injected into a currently created BeanPostProcessor [jobRegistryBeanPostProcessor]? Check the corresponding BeanPostProcessor declaration and its dependencies.
2025-06-16 11:46:16 [main] WARN  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$SpringBootBatchConfiguration' of type [org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration$SpringBootBatchConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying). The currently created BeanPostProcessor [jobRegistryBeanPostProcessor] is declared through a non-static factory method on that class; consider declaring it as static instead.
2025-06-16 11:46:16 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8090 (http)
2025-06-16 11:46:16 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-06-16 11:46:16 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.19]
2025-06-16 11:46:16 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-06-16 11:46:16 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2110 ms
2025-06-16 11:46:16 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:postgresql://localhost:5433/finance_admin'
2025-06-16 11:46:16 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-06-16 11:46:17 [main] INFO  c.finance.admin.config.JacksonConfig - Configuring primary Jackson ObjectMapper
2025-06-16 11:46:17 [main] INFO  c.f.admin.config.RedisConfiguration - Configuring Redis connection to localhost:6380
2025-06-16 11:46:17 [main] INFO  c.f.admin.config.RedisConfiguration - Creating Redis connection factory with host: localhost, port: 6380
2025-06-16 11:46:17 [main] INFO  c.f.admin.config.RedisConfiguration - Testing Redis connection...
2025-06-16 11:46:17 [main] INFO  c.f.admin.config.RedisConfiguration - Redis connection successful
2025-06-16 11:46:18 [main] INFO  c.f.admin.config.EmailConfiguration - Creating Mock JavaMailSender bean - Email service is disabled
2025-06-16 11:46:19 [main] INFO  org.mongodb.driver.client - MongoClient with metadata {"driver": {"name": "mongo-java-driver|sync|spring-boot", "version": "4.11.1"}, "os": {"type": "Darwin", "name": "Mac OS X", "architecture": "aarch64", "version": "14.3.1"}, "platform": "Java/Eclipse Adoptium/17.0.15+6"} created with settings MongoClientSettings{readPreference=primary, writeConcern=WriteConcern{w=null, wTimeout=null ms, journal=null}, retryWrites=true, retryReads=true, readConcern=ReadConcern{level=null}, credential=null, transportSettings=null, streamFactoryFactory=null, commandListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsCommandListener@5419e14], codecRegistry=ProvidersCodecRegistry{codecProviders=[ValueCodecProvider{}, BsonValueCodecProvider{}, DBRefCodecProvider{}, DBObjectCodecProvider{}, DocumentCodecProvider{}, CollectionCodecProvider{}, IterableCodecProvider{}, MapCodecProvider{}, GeoJsonCodecProvider{}, GridFSFileCodecProvider{}, Jsr310CodecProvider{}, JsonObjectCodecProvider{}, BsonCodecProvider{}, EnumCodecProvider{}, com.mongodb.client.model.mql.ExpressionCodecProvider@6ab90a7e, com.mongodb.Jep395RecordCodecProvider@83718d, com.mongodb.KotlinCodecProvider@1b5e9c6c]}, loggerSettings=LoggerSettings{maxDocumentLength=1000}, clusterSettings={hosts=[localhost:27017], srvServiceName=mongodb, mode=SINGLE, requiredClusterType=UNKNOWN, requiredReplicaSetName='null', serverSelector='null', clusterListeners='[]', serverSelectionTimeout='30000 ms', localThreshold='15 ms'}, socketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=0, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, heartbeatSocketSettings=SocketSettings{connectTimeoutMS=10000, readTimeoutMS=10000, receiveBufferSize=0, proxySettings=ProxySettings{host=null, port=null, username=null, password=null}}, connectionPoolSettings=ConnectionPoolSettings{maxSize=100, minSize=0, maxWaitTimeMS=120000, maxConnectionLifeTimeMS=0, maxConnectionIdleTimeMS=0, maintenanceInitialDelayMS=0, maintenanceFrequencyMS=60000, connectionPoolListeners=[io.micrometer.core.instrument.binder.mongodb.MongoMetricsConnectionPoolListener@51d775f8], maxConnecting=2}, serverSettings=ServerSettings{heartbeatFrequencyMS=10000, minHeartbeatFrequencyMS=500, serverListeners='[]', serverMonitorListeners='[]'}, sslSettings=SslSettings{enabled=false, invalidHostNameAllowed=false, context=null}, applicationName='null', compressorList=[], uuidRepresentation=JAVA_LEGACY, serverApi=null, autoEncryptionSettings=null, dnsClient=null, inetAddressResolver=null, contextProvider=null}
2025-06-16 11:46:19 [cluster-ClusterId{value='684f776bdc7d8c145cffaa98', description='null'}-localhost:27017] INFO  org.mongodb.driver.cluster - Monitor thread successfully connected to server with description ServerDescription{address=localhost:27017, type=STANDALONE, state=CONNECTED, ok=true, minWireVersion=0, maxWireVersion=25, maxDocumentSize=16777216, logicalSessionTimeoutMinutes=30, roundTripTimeNanos=9316709}
2025-06-16 11:46:19 [main] INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 4 endpoint(s) beneath base path '/actuator'
2025-06-16 11:46:19 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-06-16 11:46:19 [main] INFO  c.finance.admin.config.WebMvcConfig - Configuring Swagger UI resource handlers
2025-06-16 11:46:19 [main] INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6650679f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25d91060, org.springframework.security.web.context.SecurityContextHolderFilter@1d8aaa96, org.springframework.security.web.header.HeaderWriterFilter@299bafe9, org.springframework.security.web.authentication.logout.LogoutFilter@723e9e3a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54f31bba, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@62b00604, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@130f5244, org.springframework.security.web.session.SessionManagementFilter@d415940, org.springframework.security.web.access.ExceptionTranslationFilter@65c26015, org.springframework.security.web.access.intercept.AuthorizationFilter@553dd51d]
2025-06-16 11:46:19 [main] INFO  org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor
2025-06-16 11:46:19 [main] INFO  o.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
2025-06-16 11:46:19 [main] INFO  org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.3.2 created.
2025-06-16 11:46:19 [main] INFO  org.quartz.simpl.RAMJobStore - RAMJobStore initialized.
2025-06-16 11:46:19 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.3.2) 'quartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

2025-06-16 11:46:19 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'quartzScheduler' initialized from an externally provided properties instance.
2025-06-16 11:46:19 [main] INFO  org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.3.2
2025-06-16 11:46:19 [main] INFO  org.quartz.core.QuartzScheduler - JobFactory set to: org.springframework.scheduling.quartz.SpringBeanJobFactory@7d976ebe
2025-06-16 11:46:19 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8090 (http) with context path ''
2025-06-16 11:46:19 [main] INFO  o.s.s.quartz.SchedulerFactoryBean - Starting Quartz Scheduler now
2025-06-16 11:46:19 [main] INFO  org.quartz.core.QuartzScheduler - Scheduler quartzScheduler_$_NON_CLUSTERED started.
2025-06-16 11:46:19 [main] INFO  c.f.admin.AdminManagementApplication - Started AdminManagementApplication in 5.515 seconds (process running for 5.661)
2025-06-16 11:46:20 [main] INFO  o.s.b.a.b.JobLauncherApplicationRunner - Running default command line with: []
2025-06-16 11:46:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* UPDATE
        ClientSession cs 
    SET
        cs.isActive = false 
    WHERE
        cs.expiresAt < :now */ update client_sessions 
    set
        is_active=false 
    where
        expires_at<?
2025-06-16 11:46:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* UPDATE
        ClientSession cs 
    SET
        cs.isActive = false 
    WHERE
        cs.rememberMeExpiresAt < :now 
        AND cs.rememberMeToken IS NOT NULL */ update client_sessions 
    set
        is_active=false 
    where
        remember_me_expires_at<? 
        and remember_me_token is not null
2025-06-16 11:46:20 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:46:20 [main] DEBUG org.hibernate.SQL - 
    /* <criteria> */ select
        au1_0.id,
        au1_0.created_at,
        au1_0.created_by,
        au1_0.email,
        au1_0.failed_login_attempts,
        au1_0.force_password_change,
        au1_0.last_login,
        au1_0.last_password_change,
        au1_0.locked_until,
        au1_0.mfa_enabled,
        au1_0.mfa_secret,
        au1_0.password_expires_at,
        au1_0.password,
        au1_0.session_timeout_minutes,
        au1_0.status,
        au1_0.updated_at,
        au1_0.updated_by,
        au1_0.username,
        au1_0.version 
    from
        admin_users au1_0 
    where
        au1_0.username=?
2025-06-16 11:46:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        n 
    FROM
        ClientNotification n 
    WHERE
        n.scheduledAt <= :now 
        AND n.deliveryStatus = 'PENDING' */ select
            cn1_0.id,
            cn1_0.category,
            cn1_0.client_id,
            cn1_0.created_at,
            cn1_0.created_by,
            cn1_0.delivered_at,
            cn1_0.delivery_method,
            cn1_0.delivery_status,
            cn1_0.expires_at,
            cn1_0.is_read,
            cn1_0.message,
            cn1_0.metadata,
            cn1_0.notification_type,
            cn1_0.priority_level,
            cn1_0.read_at,
            cn1_0.scheduled_at,
            cn1_0.title,
            cn1_0.updated_at,
            cn1_0.updated_by,
            cn1_0.version 
        from
            client_notifications cn1_0 
        where
            cn1_0.scheduled_at<=? 
            and cn1_0.delivery_status='PENDING'
2025-06-16 11:46:20 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing expired notifications
2025-06-16 11:46:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* UPDATE
        ClientNotification n 
    SET
        n.deliveryStatus = 'EXPIRED' 
    WHERE
        n.expiresAt <= :now 
        AND n.deliveryStatus != 'EXPIRED' */ update client_notifications 
    set
        delivery_status='EXPIRED' 
    where
        expires_at<=? 
        and delivery_status<>'EXPIRED'
2025-06-16 11:46:20 [main] DEBUG org.hibernate.SQL - 
    /* insert for
        com.finance.admin.auth.entity.AdminUser */insert 
    into
        admin_users (created_at, created_by, email, failed_login_attempts, force_password_change, last_login, last_password_change, locked_until, mfa_enabled, mfa_secret, password_expires_at, password, session_timeout_minutes, status, updated_at, updated_by, username, version, id) 
    values
        (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
2025-06-16 11:46:20 [main] DEBUG org.hibernate.SQL - 
    /* update
        for com.finance.admin.auth.entity.AdminUser */update admin_users 
    set
        email=?,
        failed_login_attempts=?,
        force_password_change=?,
        last_login=?,
        last_password_change=?,
        locked_until=?,
        mfa_enabled=?,
        mfa_secret=?,
        password_expires_at=?,
        password=?,
        session_timeout_minutes=?,
        status=?,
        updated_at=?,
        updated_by=?,
        username=?,
        version=? 
    where
        id=? 
        and version=?
2025-06-16 11:46:20 [main] DEBUG org.hibernate.SQL - 
    /* insert for
        com.finance.admin.auth.entity.AdminUser.roles */insert 
    into
        admin_user_roles (admin_user_id, role) 
    values
        (?, ?)
2025-06-16 11:46:22 [http-nio-8090-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-06-16 11:46:22 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-06-16 11:46:22 [http-nio-8090-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-06-16 11:46:22 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-06-16 11:46:22 [http-nio-8090-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:46:22 [http-nio-8090-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-06-16 11:46:22 [http-nio-8090-exec-1] INFO  o.s.a.r.c.CachingConnectionFactory - Attempting to connect to: [localhost:5672]
2025-06-16 11:46:22 [http-nio-8090-exec-1] INFO  o.s.a.r.c.CachingConnectionFactory - Created new connection: rabbitConnectionFactory#484adeaa:0/SimpleConnection@7842e309 [delegate=amqp://guest@127.0.0.1:5672/, localPort=57566]
2025-06-16 11:46:23 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-06-16 11:46:23 [http-nio-8090-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:46:23 [http-nio-8090-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-06-16 11:46:23 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /actuator/health
2025-06-16 11:46:23 [http-nio-8090-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-06-16 11:46:23 [http-nio-8090-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /actuator/health
2025-06-16 11:47:19 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:47:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        n 
    FROM
        ClientNotification n 
    WHERE
        n.scheduledAt <= :now 
        AND n.deliveryStatus = 'PENDING' */ select
            cn1_0.id,
            cn1_0.category,
            cn1_0.client_id,
            cn1_0.created_at,
            cn1_0.created_by,
            cn1_0.delivered_at,
            cn1_0.delivery_method,
            cn1_0.delivery_status,
            cn1_0.expires_at,
            cn1_0.is_read,
            cn1_0.message,
            cn1_0.metadata,
            cn1_0.notification_type,
            cn1_0.priority_level,
            cn1_0.read_at,
            cn1_0.scheduled_at,
            cn1_0.title,
            cn1_0.updated_at,
            cn1_0.updated_by,
            cn1_0.version 
        from
            client_notifications cn1_0 
        where
            cn1_0.scheduled_at<=? 
            and cn1_0.delivery_status='PENDING'
2025-06-16 11:48:20 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:48:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        n 
    FROM
        ClientNotification n 
    WHERE
        n.scheduledAt <= :now 
        AND n.deliveryStatus = 'PENDING' */ select
            cn1_0.id,
            cn1_0.category,
            cn1_0.client_id,
            cn1_0.created_at,
            cn1_0.created_by,
            cn1_0.delivered_at,
            cn1_0.delivery_method,
            cn1_0.delivery_status,
            cn1_0.expires_at,
            cn1_0.is_read,
            cn1_0.message,
            cn1_0.metadata,
            cn1_0.notification_type,
            cn1_0.priority_level,
            cn1_0.read_at,
            cn1_0.scheduled_at,
            cn1_0.title,
            cn1_0.updated_at,
            cn1_0.updated_by,
            cn1_0.version 
        from
            client_notifications cn1_0 
        where
            cn1_0.scheduled_at<=? 
            and cn1_0.delivery_status='PENDING'
2025-06-16 11:49:20 [scheduling-1] DEBUG c.f.a.c.n.s.ClientNotificationService - Processing scheduled notifications
2025-06-16 11:49:20 [scheduling-1] DEBUG org.hibernate.SQL - 
    /* SELECT
        n 
    FROM
        ClientNotification n 
    WHERE
        n.scheduledAt <= :now 
        AND n.deliveryStatus = 'PENDING' */ select
            cn1_0.id,
            cn1_0.category,
            cn1_0.client_id,
            cn1_0.created_at,
            cn1_0.created_by,
            cn1_0.delivered_at,
            cn1_0.delivery_method,
            cn1_0.delivery_status,
            cn1_0.expires_at,
            cn1_0.is_read,
            cn1_0.message,
            cn1_0.metadata,
            cn1_0.notification_type,
            cn1_0.priority_level,
            cn1_0.read_at,
            cn1_0.scheduled_at,
            cn1_0.title,
            cn1_0.updated_at,
            cn1_0.updated_by,
            cn1_0.version 
        from
            client_notifications cn1_0 
        where
            cn1_0.scheduled_at<=? 
            and cn1_0.delivery_status='PENDING'
